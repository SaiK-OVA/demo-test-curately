import{r as s,k as l,O as M,T as P,B as R,S as x,L as d,W as m,A as f,V as S}from"./DAuuuMsE.js";import{M as A}from"./Ez4yizbq.js";import{S as k}from"./68QKccnG.js";import{T as I}from"./BestnZaX.js";import{M as N}from"./OPHguh9D.js";import{I as z}from"./BqtMM88J.js";import{C as $}from"./9WUULBRn.js";import{S as O}from"./B2qHeyhM.js";import"./ZuCM0PYB.js";import"./CGk11wqi.js";import"./D2Y9uqkR.js";import"./BZPAOVTJ.js";import"./w5-nO31Y.js";import"./DistCVVm.js";import"./DVyrZ3Lu.js";import"./DPDHQPP4.js";import"./zQ0bN4E_.js";import"./CDmetmmn.js";import"./DbsmdDnd.js";import"./C4JXEfII.js";import"./Dsukr_f2.js";import"./1Bak8biM.js";import"./B7U4EVWr.js";import"./Br0xRRVu.js";import"./C_IKUwSv.js";import"./JyAhcbJl.js";import"./DA-mmMmo.js";import"./XBS2c42B.js";const Ne=({})=>{const[n,u]=s.useState([]),[W,v]=s.useState([]),[g,h]=s.useState([]),[c,b]=s.useState(""),[G,y]=s.useState({}),[E,H]=s.useState({pageIndex:0,pageSize:50}),[j,K]=s.useState(""),p=s.useMemo(()=>c?n.filter(e=>e.metric.toLowerCase().includes(c.toLowerCase())):n,[n,c]);s.useMemo(()=>p.length,[p]);const C=()=>{let t=d.getvalue("clientId");m(f.getCall("admin",`getshortListBarStages/${t}`).then(e=>{var a,r;console.log((a=e==null?void 0:e.data)==null?void 0:a.shortlistBarStages),(r=e==null?void 0:e.data)!=null&&r.shortlistBarStages?h(e.data.shortlistBarStages):h([])}).catch(e=>{console.error("Error fetching metric list",e),h([])}))},V=()=>{m(f.getCall("admin","getGoalMetrics/1").then(t=>{var e,a;if((e=t==null?void 0:t.data)!=null&&e.Success){let r=((a=t==null?void 0:t.data)==null?void 0:a.goalMetrics)||[];u([...r]),D(r)}}).catch(t=>{console.error("Error fetching candidate status list",t)}))},D=t=>{m(f.postWithData("admin","getGoalMetricStatusMapping",{clientId:d.getvalue("clientId")}).then(e=>{var a,r,i,o;(a=e==null?void 0:e.data)!=null&&a.Success&&(v(((r=e==null?void 0:e.data)==null?void 0:r.goalMetricStatusMappings)||[]),w(t,((i=e==null?void 0:e.data)==null?void 0:i.goalMetricStatusMappings)||[]),console.log((o=e==null?void 0:e.data)==null?void 0:o.goalMetricStatusMappings))}).catch(e=>{console.log("Error fetching metric status mapping list",e)}))},w=(t,e)=>{if(e.length>0){let a=t||[];a=a.map(i=>{var o;return{...i,statusId:e!=null&&e.length&&((o=e.find(F=>F.metricId===i.metricId))==null?void 0:o.statusId)||""}});let r=a.reduce((i,o)=>(o!=null&&o.statusId&&(i[o.metricId]=!0),i),{});y({...r}),u([...a])}else u(a=>a.map(r=>({...r,statusId:0})))};s.useEffect(()=>{C(),V()},[]);const L=(t,e)=>{const a=t.target.value;let r=n||[];r=r.map(i=>i.metricId===e?{...i,statusId:a}:i),u([...r])},T=async()=>{Object.entries(G).filter(([a,r])=>r).map(([a])=>parseInt(a));const t=n.map(a=>({metricId:a.metricId,statusId:a!=null&&a.statusId?a.statusId:null})),e={clientId:d.getvalue("clientId"),recrId:d.getvalue("recrId"),goalMetricStatusMappings:t};try{m(f.postWithData("admin","saveGoalMetricStatusMapping",e).then(a=>{a.data.Success?(S("Goal metric status mapping saved successfully","success"),y({}),b(""),D(n)):S(a.data.Message||"Failed to update Goal metric status mapping","error")}))}catch(a){console.error("Error updating recruiter credits:",a),S("Something went wrong. Please try again.","error")}},B=s.useMemo(()=>[{accessorKey:"metric",header:"Metric Name",Cell:({row:t})=>l.jsxDEV("span",{children:t.original.metric},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:198,columnNumber:17},void 0)},{accessorKey:"statusId",header:"Metric Status",Cell:({row:t})=>(t.getIsSelected(),l.jsxDEV(I,{sx:{width:"220px"},fullWidth:!0,className:"selHeight",name:`metric-${t.original.metricId}`,id:`metric-${t.original.metricId}`,size:"small",select:!0,defaultValue:t.original.statusId?t.original.statusId:"0",value:t.original.statusId?t.original.statusId:"0",placeholder:"Goal Status List",onChange:e=>L(e,t.original.metricId),children:[l.jsxDEV(N,{value:"0",children:"None "},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:224,columnNumber:21},void 0),g.length>0?g.map((e,a)=>l.jsxDEV(N,{value:e.statusId,children:e.label},`${e.statusId}-${a}-${t.original.metricId}`,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:227,columnNumber:29},void 0)):l.jsxDEV(N,{disabled:!0,children:"No Options Available"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:232,columnNumber:25},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:208,columnNumber:24},void 0))}],[n,g]);return l.jsxDEV("div",{id:"MetricList",className:"pt-2 px-1 ",children:[l.jsxDEV(M,{container:!0,direction:"row",className:"customCard  px-2 py-1",justifyContent:"space-between",alignItems:"center",display:"flex",sx:{minHeight:"auto !important"},children:[l.jsxDEV(P,{variant:"h6",className:"headerFormContainer",children:"Metrics Mapping"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:253,columnNumber:17},void 0),l.jsxDEV("div",{children:l.jsxDEV(M,{container:!0,direction:"row",justifyContent:"end",alignItems:"center",children:l.jsxDEV(R,{variant:"contained",type:"button",color:"primary",onClick:()=>T(),children:"save"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:270,columnNumber:25},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:257,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:256,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:244,columnNumber:13},void 0),l.jsxDEV("div",{className:"MRTableCustom pl-0 mt-0",children:[l.jsxDEV(x,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,className:"headerFormContainer",children:l.jsxDEV(x,{direction:"row",alignItems:"center",spacing:1,justifyContent:"flex-end",children:l.jsxDEV(I,{placeholder:"Search by metric name",size:"small",id:"Search",name:"Search",className:"matricSearchName",value:c,onChange:t=>{b(t.target.value)},slotProps:{input:{startAdornment:l.jsxDEV(O,{fontSize:"small",htmlColor:"#757575"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:296,columnNumber:53},void 0),endAdornment:l.jsxDEV(z,{position:"end",disablePointerEvents:!c,children:l.jsxDEV($,{fontSize:"small",htmlColor:c?"#757575":"#ebebeb",sx:{cursor:"pointer"},onClick:()=>b("")},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:298,columnNumber:41},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:297,columnNumber:51},void 0)}}},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:286,columnNumber:25},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:285,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:284,columnNumber:17},void 0),l.jsxDEV(A,{columns:B,data:p,enableTopToolbar:!1,enableBottomToolbar:!1,enableStickyHeader:!0,enableRowSelection:!1,initialState:{columnPinning:{left:["metric"]},density:"compact",showGlobalFilter:!0},enableDensityToggle:!1,enableFullScreenToggle:!1,enableGlobalFilterModes:!0,columnResizeMode:"onChange",enablePagination:!0,state:{pagination:E,globalFilter:j},muiPaginationProps:{showFirstButton:!1,showLastButton:!1,SelectProps:{style:{display:"none"}}},icons:{ArrowDownwardIcon:t=>l.jsxDEV(k,{...t},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:334,columnNumber:60},void 0)},enableSelectAll:!0,getRowId:t=>t.metricId,onRowSelectionChange:y},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:305,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:283,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:240,columnNumber:9},void 0)};export{Ne as default};
