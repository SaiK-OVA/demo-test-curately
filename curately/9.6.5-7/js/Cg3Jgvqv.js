import{r as l,W as I,A as b,L as n,k as a,O as D,C as Z,B as ee,T as te,V as f}from"./DAuuuMsE.js";import{E as ae}from"./DVyrZ3Lu.js";import{A as re}from"./BreDWgEm.js";import{u as se}from"./DlTMcna4.js";import{V as ne}from"./DwmmMyHW.js";import{A as ie}from"./DA-mmMmo.js";import{C as le}from"./DistCVVm.js";import{T as j,C as A,F as me}from"./BestnZaX.js";import{M as oe}from"./OPHguh9D.js";import{D as ce}from"./C_IKUwSv.js";import{A as ue,a as de,b as ve}from"./tW4e0zz_.js";import{F as be}from"./IOI02mfF.js";const Se=({closeInvitePopup:C})=>{const[v,y]=l.useState([]),[L,k]=l.useState([]),[m,d]=l.useState([]),[N,R]=l.useState("2"),[h,g]=l.useState(""),[W,p]=l.useState(!1),[x,T]=l.useState(""),w=()=>{I(b.postWithData("admin","getRoleList",{recrId:n.getvalue("recrId"),clientId:n.getvalue("clientId")}).then(e=>{const t=e.data;t.Success&&k(t.list)}))};l.useEffect(()=>{w()},[]);const $=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),M=async e=>{try{await se.validate(e),g(""),T(""),P(e)}catch(t){t instanceof ne&&T(t.message||"Invalid email format")}},B=e=>{d(m.filter(t=>t!==e))},F=(e,t)=>{g(t),$(t)?E([t]):E([])},[z,E]=l.useState([]),O=()=>{if(m.length){let e=m.filter((t,r)=>m.indexOf(t)===r);I(b.postWithData("admin","sendInviteEmail",{recrId:n.getvalue("recrId"),clientId:n.getvalue("clientId"),roleId:N,emailIds:e}).then(t=>{console.log(t.data),t.data.Success?(f("Invitation sent successfully.","success"),C(!0)):f(t.data.Message?t.data.Message:"An error occured while inviting.","error")}))}else f("Please enter emails to Invite","error")},P=e=>{p(!0),b.postWithData("admin","inviteRecrAvailability",{recrId:n.getvalue("recrId"),clientId:n.getvalue("clientId"),email:e}).then(t=>{console.log(t.data),t.data.Success?_(e):f(t.data.Message?t.data.Message:"An error occured while validating the email.","error")})},_=async e=>{try{(await re.validateWorkEmail(e)).data.debounce.free_email==="false"?d([...m,e]):f("Please Enter Work Email.","error")}catch(t){return console.error("Error validating email:",t),!1}p(!1)},[G,S]=l.useState(!1),[H,V]=l.useState(""),K=(e,t)=>{const{checked:r,value:c,name:i}=e.target;d(r?[...m,c]:m.filter(o=>o!==c));const s=v.map(o=>o.email===t.email?{...o,selected:r}:o);y(s);const u=s.every(o=>o.selected);S(u)},q=e=>{const{checked:t,value:r,name:c}=e.target;S(t);let i=m;v.forEach(u=>{t?i.includes(u.email)||i.push(u.email):i=i.filter(o=>o!==u.email)}),d([...i]);const s=v.map(u=>({...u,selected:t}));y(s)};l.useEffect(()=>{Q()},[]);const J=e=>{I(b.postWithData("admin","getDomainsRecruiterDetails",{domain:n.getvalue("email").split("@")[1],recrId:n.getvalue("recrId"),clientId:n.getvalue("clientId")}).then(t=>{if(t.data.Success){const r=t.data.domainRecruiterDetails.find(c=>c.domain===n.getvalue("email").split("@")[1]);if(r!=null&&r.domain){let c=[];for(let s=0;s<e.length;s++)c.push({email:e[s].email,id:e[s].recrId,name:e[s].recruiterName,selected:!1});let i=[];for(let s=0;s<r.recruiterDetails.length;s++)r.recruiterDetails[s].recruiterName&&r.recruiterDetails[s].recrId&&!c.some(o=>o.id===r.recruiterDetails[s].recrId)&&!r.recruiterDetails[s].invited&&i.push({name:r.recruiterDetails[s].recruiterName,email:r.recruiterDetails[s].email,id:r.recruiterDetails[s].recrId,selected:!1});y(i),i.length&&(i.length===1?V(`${i[0].name} person from ${n.getvalue("email").split("@")[1]} already using Curately`):V(`${i.length} people from ${n.getvalue("email").split("@")[1]} already using Curately`))}}}))},Q=()=>{I(b.getById("admin",`getCredits/${n.getvalue("clientId")}`,n.getvalue("recrId")).then(e=>{console.log(e.data),e.data.Success&&J(e.data.invitedRecruiterDetails||[])}))},[U,X]=l.useState(!1),Y=e=>(t,r)=>{X(r?e:!1)};return a.jsxDEV("div",{id:"InviteTeamMembers",children:[a.jsxDEV(D,{container:!0,direction:"row",children:[a.jsxDEV(D,{size:7,className:"input-wrapper",children:[a.jsxDEV(ie,{multiple:!0,freeSolo:!0,value:m,onChange:(e,t)=>{if(t.length>m.length){const r=t[t.length-1];M(r)}else d(t)},options:z,inputValue:h,onInputChange:F,renderInput:e=>a.jsxDEV(j,{...e,label:"Add people using their emails",variant:"outlined",error:!!x,helperText:x,onKeyDown:t=>{t.key==="Enter"&&h&&(t.preventDefault(),M(h))}},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:365,columnNumber:29},void 0),renderTags:(e,t)=>e.map((r,c)=>a.jsxDEV(le,{variant:"outlined",label:r,...t({index:c}),onDelete:()=>B(r)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:378,columnNumber:29},void 0))},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:349,columnNumber:21},void 0),W&&a.jsxDEV(Z,{className:"loaderIcon",size:20},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:382,columnNumber:35},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:348,columnNumber:17},void 0),a.jsxDEV(D,{size:3,children:a.jsxDEV(j,{fullWidth:!0,className:"mt-1 ml-1",variant:"outlined",type:"text",size:"small",id:"roleId",name:"roleId",defaultValue:2,value:N,onChange:e=>R(e.target.value),select:!0,children:L.map(e=>a.jsxDEV(oe,{value:e.roleId,children:e.roleName},e.roleId,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:398,columnNumber:40},void 0))},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:385,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:384,columnNumber:17},void 0),a.jsxDEV(D,{sx:{width:70},children:a.jsxDEV(ee,{color:"primary",variant:"contained",onClick:O,disabled:!m.length,className:"ml-2 my-3",children:"Invite"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:405,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:404,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:347,columnNumber:13},void 0),a.jsxDEV(ce,{className:"my-4"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:408,columnNumber:13},void 0),v.length?a.jsxDEV(a.Fragment,{children:[a.jsxDEV("span",{className:"fs-14 fw-6",children:"Recommended people for you"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:412,columnNumber:25},void 0),a.jsxDEV(ue,{expanded:U,onChange:Y(!0),className:"mt-2",children:[a.jsxDEV(de,{expandIcon:a.jsxDEV(ae,{},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:415,columnNumber:45},void 0),"aria-controls":"teamListAccordion-content",id:"teamListAccordion-header",children:[a.jsxDEV(A,{checked:G,onChange:q,className:"pt-0",color:"secondary"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:419,columnNumber:33},void 0),a.jsxDEV(te,{children:[" ",H]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:420,columnNumber:33},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:414,columnNumber:29},void 0),a.jsxDEV(ve,{sx:{overflow:"auto",maxHeight:200},className:"pt-0",children:a.jsxDEV(be,{className:"pl-3",children:v.map(e=>a.jsxDEV(me,{control:a.jsxDEV(A,{checked:e.selected,value:e.email,onChange:t=>K(t,e)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:428,columnNumber:87},void 0),label:a.jsxDEV(a.Fragment,{children:[a.jsxDEV("span",{className:"fs-14 fw-6 pr-2",children:e.name},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:428,columnNumber:212},void 0),a.jsxDEV("span",{className:"fs-13",children:e.email},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:428,columnNumber:268},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:428,columnNumber:210},void 0)},e.id,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:428,columnNumber:42},void 0))},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:423,columnNumber:33},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:422,columnNumber:29},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:413,columnNumber:25},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:411,columnNumber:21},void 0):null]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:346,columnNumber:10},void 0)};export{Se as I};
