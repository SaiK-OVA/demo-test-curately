import{L as h,r as n,k as e,D as Y,I as P,n as ee,o as ae,S,U as te,B as F,V as s,W as N,A as m,O as M,T as le,b1 as se}from"./DAuuuMsE.js";import{L as oe,D as ie,E as re}from"./BZPAOVTJ.js";import{D as de}from"./DOjwGLM0.js";import{S as ne}from"./68QKccnG.js";import{M as ce}from"./Ez4yizbq.js";import{u as ue}from"./D1ftmOk2.js";import{c as me,d as ye,a as I,h as he}from"./DwmmMyHW.js";import{A as fe,D as $,l as be}from"./Cg41riQw.js";import{E as De}from"./BayHs3N0.js";import{D as pe}from"./Br0xRRVu.js";import{T as Ne,I as ge}from"./BestnZaX.js";import{F as He,S as xe}from"./w5-nO31Y.js";import{M as L}from"./OPHguh9D.js";import{C as Se}from"./B7IUApoB.js";import{S as ve}from"./CGk11wqi.js";import{T as z}from"./DbsmdDnd.js";import"./DistCVVm.js";import"./BqtMM88J.js";import"./ZuCM0PYB.js";import"./D2Y9uqkR.js";import"./DVyrZ3Lu.js";import"./DPDHQPP4.js";import"./zQ0bN4E_.js";import"./CDmetmmn.js";import"./C4JXEfII.js";import"./Dsukr_f2.js";import"./1Bak8biM.js";import"./B7U4EVWr.js";import"./C_IKUwSv.js";import"./JyAhcbJl.js";import"./DA-mmMmo.js";import"./XBS2c42B.js";import"./IOI02mfF.js";const Ee=({open:V,handleClose:f,add:u,holidayData:i})=>{let v=h.getvalue("clientId");const[j,b]=n.useState(!1),t=ue({initialValues:i?{holidayName:i?i.holidayName:"",holidayDate:i?i.holidayDate:"",holidayType:i?i.holidayType.toString():"true",holidayId:i?i.holidayId:"",clientId:i?i.clientId:v}:{holidayName:"",holidayDate:"",holidayType:"false",holidayId:"",clientId:v},validationSchema:me().shape({holidayId:I(),holidayName:I().matches(/^[a-zA-Z0-9-_@() ]+$/,"holidayName can only contain letters, numbers, and spaces").required("Holiday name is required"),clientId:I(),holidayDate:he().required("Holiday Date is required"),holidayType:I().required("Holiday Type is required"),holidayStatus:ye()}),enableReinitialize:!0,onSubmit:()=>{b(!0)}}),E=()=>{if(t.values.holidayName.trim()==="")return s("Please Enter Holiday Name","error"),!1;if(t.values.holidayDate.trim()==="")return s("Please enter Holiday Date","error"),!1;if(t.values.holidayType==="")return s("Please select Holiday Type","error"),!1;b(!0);let o={holidayDate:t.values.holidayDate,holidayName:t.values.holidayName,holidayType:t.values.holidayType.toString()==="true",clientId:h.getvalue("clientId")};t.isValid?N(m.postWithData("admin","saveHolidays",o).then(y=>{y.data.Success?(s("Holiday has been saved successfully.","success"),t.resetForm(),f(!0)):s(y.data.Message?y.data.Message:"An error occured","error")})):t.errors.holidayName||s("Please fill all fields.","error")},g=()=>{if(t.values.holidayName.trim()==="")return s("Please Enter Holiday Name","error"),!1;if(t.values.holidayDate.trim()==="")return s("Please enter Holiday Date","error"),!1;if(t.values.holidayType==="")return s("Please select Holiday Type","error"),!1;b(!0),t.isValid?N(m.postWithData("admin","updateHolidays",{...t.values}).then(o=>{o.data.Success?(s("Holiday has been updated successfully.","success"),t.resetForm(),f(!0)):s(o.data.Message?o.data.Message:"An error occured","error")})):s("Please fill all fields.","error")},D=()=>{f(!1),t.resetForm()},w=o=>{m.saveAuditLog(o)};return e.jsxDEV(Y,{open:V,onClose:f,maxWidth:"sm",fullWidth:!0,children:[e.jsxDEV(pe,{children:[u?"Add New":"Update "," Holiday"]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:177,columnNumber:13},void 0),e.jsxDEV(P,{"aria-label":"close",onClick:D,sx:{position:"absolute",right:8,top:8,color:o=>o.palette.grey[500]},children:e.jsxDEV(ee,{},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:188,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:178,columnNumber:13},void 0),e.jsxDEV(ae,{children:e.jsxDEV("form",{onSubmit:t.handleSubmit,children:e.jsxDEV(S,{spacing:2,children:[e.jsxDEV(S,{children:[e.jsxDEV(Ne,{autoFocus:!0,id:"holidayName",label:"Holidays Name",size:"small",type:"text",fullWidth:!0,required:!0,variant:"outlined",value:t.values.holidayName,onChange:o=>{t.setFieldValue("holidayName",o.target.value)},error:t.touched.holidayName&&!!t.errors.holidayName},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:194,columnNumber:29},void 0),e.jsxDEV(De,{formikObj:t,name:"holidayName",isFormSubmitted:j},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:209,columnNumber:29},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:193,columnNumber:25},void 0),e.jsxDEV(oe,{dateAdapter:fe,children:e.jsxDEV(ie,{label:"Date",value:t.values.holidayDate?$.fromISO(t.values.holidayDate):null,onChange:o=>{t.setFieldValue("holidayDate",o?o.toISODate():"")},slotProps:{textField:{size:"small"}}},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:212,columnNumber:29},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:211,columnNumber:25},void 0),e.jsxDEV(He,{size:"small",className:"mt-5",children:[e.jsxDEV(ge,{id:"type-label",children:"Type"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:232,columnNumber:29},void 0),e.jsxDEV(xe,{labelId:"type-label",id:"holidayType",name:"holidayType",label:"Type",value:t.values.holidayType,onChange:o=>{t.setFieldValue("holidayType",o.target.value)},children:[e.jsxDEV(L,{value:"true",children:"Default"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:243,columnNumber:33},void 0),e.jsxDEV(L,{value:"false",children:"Custom"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:244,columnNumber:33},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:233,columnNumber:29},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:231,columnNumber:25},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:192,columnNumber:21},void 0)},i==null?void 0:i.holidayId,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:191,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:190,columnNumber:13},void 0),e.jsxDEV(te,{children:[e.jsxDEV(F,{variant:"outlined",type:"button",size:"small",color:"secondary",className:"mr-2",onClick:D,children:"Cancel"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:251,columnNumber:17},void 0),e.jsxDEV(F,{color:"primary",variant:"contained",size:"small",onClick:()=>{(u?E:g)(),w(4242)},children:[u?"Save":"Update"," Holiday"]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:259,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:250,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:175,columnNumber:9},void 0)},oa=()=>{const V=h.checkSettings(130008)===5||h.checkSettings(130008)===6,f=h.checkSettings(130008)===6;let u=h.getvalue("clientId");const[i,v]=n.useState([]),[j,b]=n.useState({holidayId:"",holidayName:"",holidayDate:"",holidayType:"false",clientId:""}),[t,E]=n.useState(!1),[g,D]=n.useState(!1),[w,o]=n.useState(0),[y,B]=n.useState(""),[C,O]=n.useState([]),[H,T]=n.useState({pageIndex:0,pageSize:10}),[U,q]=n.useState([{desc:!0,id:"holidayDate"}]);n.useEffect(()=>{const a=i.filter(l=>{var d;const r=y||"";return(d=l.holidayName)==null?void 0:d.toLowerCase().includes(r.toLowerCase())});O(a),T(l=>({...l,pageIndex:0}))},[y,i]);const R=a=>new Promise((l,r)=>{N(m.getCall("admin",`getHolidaysListbyId/${a}/${u}`).then(d=>{if(d.data.list&&d.data.list[0].holidayId){const c=d.data.list[0];b({holidayId:c.holidayId,holidayName:c.holidayName,holidayDate:c.holidayDate,holidayType:c.holidayType,clientId:h.getvalue("clientId")})}else s("Unable to fetch User Data","error");E(!0),l(d)}).catch(d=>{console.error("Error fetching User details:",d),r(d)}))}),W=a=>{R(a).then(()=>{D(!0)}).catch(l=>{s("Unable to fetch User Data",l)})},G=()=>{b({holidayId:"",holidayName:"",holidayDate:"",holidayType:"false",clientId:""}),D(!0),E(!1),p(4241)},K=a=>{D(!1),a&&A()},A=n.useCallback(be.debounce(()=>{N(m.getCall("admin",`getHolidaysList/${u}`).then(a=>{let l=Array.isArray(a.data.list)?a.data.list:[];l=l.filter(r=>r.holidayType||r.isActive),v(l),o(l.length)}))},400),[u]);n.useEffect(()=>{!g&&A()},[]);const Z=(a,l)=>{se(`Are you sure you want to delete ${l} ?`,()=>{_(a),p(4244)})},_=a=>{N(m.deleteById("admin",`deleteHolidays/${a}`,u).then(l=>{l.data.Success?(s("Holiday has been deleted successfully.","success"),A()):s(l.data.Message?l.data.Message:"An error occured while deleting","error")}).catch(l=>{var r,d,c,x;s((d=(r=l.response)==null?void 0:r.data)!=null&&d.Message?(x=(c=l.response)==null?void 0:c.data)==null?void 0:x.Message:"An error occured while deleting","error")}))},J=(a,l)=>{N(m.postWithData("admin","enableDisableHolidays",{clientId:u,isActive:l,holidayId:a}).then(r=>{r.data.Success?(s(`Holiday has been ${l?"Enabled":"Disabled"} successfully.`,"success"),A()):s(r.data.Message?r.data.Message:"An error occured while updating status","error")}).catch(r=>{var d,c,x,k;s((c=(d=r.response)==null?void 0:d.data)!=null&&c.Message?(k=(x=r.response)==null?void 0:x.data)==null?void 0:k.Message:"An error occured while updating status","error")}))},Q=n.useMemo(()=>[{accessorKey:"holidayName",header:"Holidays",size:250},{accessorKey:"holidayDate",header:"Date",Cell:({row:a})=>e.jsxDEV("span",{children:a.original.holidayDate?$.fromFormat(a.original.holidayDate.substring(0,19),"yyyy-MM-dd").toFormat("MM/dd/yyyy"):""},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:239,columnNumber:9},void 0),size:250,sortType:"datetime"},{accessorKey:"holidayType",header:"Type",size:200,accessorFn:a=>`${a.holidayType}`,Cell:({row:a})=>e.jsxDEV("div",{children:e.jsxDEV("span",{children:a.original.holidayType===!0?"Default":"Custom"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:253,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:252,columnNumber:9},void 0)},{accessorKey:"Actions",header:"Enabled",enableSorting:!1,Cell:({row:a})=>e.jsxDEV(S,{children:a.original.holidayType===!0?e.jsxDEV(ve,{checked:!!a.original.isActive,onChange:l=>{J(a.original.holidayId,l.target.checked)},inputProps:{"aria-label":"controlled"}},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:282,columnNumber:15},void 0):e.jsxDEV(S,{direction:"row",children:[V?e.jsxDEV(z,{title:"Edit",placement:"top",color:"primary",children:e.jsxDEV(P,{onClick:()=>{W(a.original.holidayId),p(4243)},children:e.jsxDEV(re,{},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:295,columnNumber:25},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:294,columnNumber:23},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:293,columnNumber:21},void 0):null,f?e.jsxDEV(z,{title:"Delete",placement:"top",color:"primary",children:e.jsxDEV(P,{onClick:()=>{Z(a.original.holidayId,a.original.holidayName)},children:e.jsxDEV(de,{},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:305,columnNumber:25},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:304,columnNumber:23},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:303,columnNumber:21},void 0):null]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:290,columnNumber:15},void 0)},a.original.holidayId,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:279,columnNumber:9},void 0),size:200}],[]),p=a=>{m.saveAuditLog(a)};n.useEffect(()=>{p(4240)},[]);const X=a=>{a>H.pageIndex?p(4245):a<H.pageIndex&&p(4246)};return e.jsxDEV("div",{className:"holidays pt-3 px-5",children:[e.jsxDEV(M,{container:!0,direction:"row",className:"customCard px-4 py-2",justifyContent:"space-between",alignItems:"center",display:"flex",sx:{minHeight:"auto !important"},children:[e.jsxDEV(le,{variant:"h6",className:"headerName",children:"Holidays"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:349,columnNumber:7},void 0),e.jsxDEV(S,{direction:"row",className:"btn-container",children:e.jsxDEV(F,{variant:"contained",color:"primary",size:"small",onClick:G,children:"New Holidays"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:353,columnNumber:9},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:352,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:340,columnNumber:5},void 0),e.jsxDEV(M,{container:!0,className:"customCard p-0",children:[e.jsxDEV(M,{sx:{width:"calc(100%)"},children:e.jsxDEV("div",{className:"MRTableCustom  pl-0 ",children:e.jsxDEV(ce,{columns:Q,data:C,state:{sorting:U,pagination:H,globalFilter:y},enablePinning:!0,enableStickyHeader:!0,initialState:{columnPinning:{left:["mrt-row-select","name"]},density:"compact",showGlobalFilter:!0},onSortingChange:q,enableDensityToggle:!1,enableFullScreenToggle:!0,enableFilters:!1,enableGlobalFilterModes:!0,columnResizeMode:"onChange",onPaginationChange:T,getRowId:a=>a.holidayId,icons:{ArrowDownwardIcon:a=>e.jsxDEV(ne,{...a},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:383,columnNumber:59},void 0)},rowCount:C.length,muiPaginationProps:{rowsPerPageOptions:[10],showFirstButton:!1,showLastButton:!1,SelectProps:{style:{display:"none"}}},enablePagination:!0,renderBottomToolbarCustomActions:()=>e.jsxDEV(Se,{page:H.pageIndex,rowsPerPage:10,rowCount:C.length,onChangePage:a=>{T({...H,pageIndex:a,pageSize:10}),X(a)},showCount:!1},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:396,columnNumber:15},void 0),onGlobalFilterChange:B},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:359,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:358,columnNumber:9},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:357,columnNumber:7},void 0),g?e.jsxDEV(Ee,{open:g,handleClose:K,add:!t,holidayData:j},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:414,columnNumber:11},void 0):null]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:356,columnNumber:5},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:339,columnNumber:3},void 0)};export{oa as default};
