import{r as n,cl as ee,k as l,O as b,l as h,T as re,B as g,V as c,A as oe}from"./DAuuuMsE.js";import{u as te,F as le,H as se,w as ne,I as ae}from"./P4ZLrbCZ.js";import{D as ie,H as ce}from"./C2haB5WN.js";import"./BuWEhdgP.js";import{T as ue}from"./BestnZaX.js";import{v as d}from"./D9g3XlR8.js";const de=ne("div"),ye=({formIdPassed:w,formNamePassed:E,callParentSave:N,cancelClicked:B,isFormBuilder:y,showSave:L,showCancel:j,canDelete:A,generateDataKey:V=!1,customFields:I,isCustomFieldDeleteSettingEnabled:W=!0})=>{const[t,u]=n.useContext(ee),[D,M]=n.useState(0),[O,P]=n.useState(!1),p=n.useRef(0),[T,S]=n.useState(!1),[m,$]=n.useState(E),[x,z]=n.useState(!1),R=n.useRef(null),[F,i]=n.useState(null),H=r=>{P(r)},q=n.useCallback((r,o)=>{u(e=>te(e,{$splice:[[r,1],[o,0,e[r]]]}))},[t]),v=(r,o,e)=>(console.log(o,"heree"),[...r.slice(0,o),e,...r.slice(o)]),C=r=>{t.forEach(s=>{s.isActive=!1});let o;const e={...r};e.id=d(),e.isActive=!0,e.labelName="",e.description="",e.value="",console.log("addingPosition : "+D),console.log("addingPositionTemp : "+p.current),e.hasOwnProperty("labelValue")&&(e.labelValue=""),e.fieldType==="checkbox"&&(e.id=d(),e.labelName="New Checkbox Label",e.checked=!1,e.isTouched=!1),e.fieldType==="multiplechoice"&&(e.choices=[{id:1+e.id,character:"A",value:"Choice 1"}]),o=v(t,T?0:p.current+1,e),o.forEach(s=>{s.id||(s.id=d()),s.value=""}),u([...o]),S(!1),i(e.id)},G=r=>{console.log(r,"tttee");const o=t.filter(e=>e.id!==r);u([...o])},Q=(r,o)=>{const e={...r};e.id=d(),e.labelName=r.labelName?"Copy Of "+r.labelName:"",e.description=r.description?r.description:"",e.datakey="",e.value="";let s=[];if(e.fieldType==="weightedmultiplechoice"||e.fieldType==="multiplechoice"){let a=1;e.choices.forEach(Y=>{const k={...Y},_=a+e.id;k.id=_,s.push(k),a++})}e.choices=[...s];const f=v(t,o,e);f.forEach(a=>{a.id||(a.id=d()),a.value=""}),console.log(f);let X=f.map(a=>(a.id===f[o].id?a.isActive=!0:a.isActive=!1,a));u([...X]),i(e.id)},U=r=>{console.log(r,"getAdingPosition"),p.current=r,M(r)},Z=n.useCallback((r,o)=>l.jsxDEV(le,{index:o,id:r.id,moveCard:q,addFormElement:C,deleteFormElement:G,copyFormElement:Q,formItem:r,getAdingPosition:U,addingPosition:D,focusId:F,canDelete:A,generateDataKey:V,setFocusId:i,isCustomFieldDeleteSettingEnabled:W},r.id,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:288,columnNumber:17},void 0),[t,F]);n.useEffect(()=>{y&&u([...t])},[]);const J=r=>{oe.saveAuditLog(r)},K=async()=>{if(!m){c("Please enter Form Name.","error");return}let r=!1;for(let o=0;o<t.length;o++)if(!["conditionallogic","label","divider","displaytext","pagebreak"].includes(t[o].fieldType))if(t[o].inputType==="checkbox")if(t[o].checkboxOption.value){if(!/^(?=.*[a-zA-Z0-9]).{1,}$/.test(t[o].checkboxOption.value)){r=!0,i(t[o].id),c("Please Enter valid Checkbox Option","error");break}}else{r=!0,i(t[o].id),c("Please Enter Checkbox Option","error");break}else if(t[o].labelName){if(!/^(?=.*[a-zA-Z0-9]).{1,}$/.test(t[o].labelName)){r=!0,i(t[o].id),c("Please Enter valid Question","error");break}}else{r=!0,i(t[o].id),c("Please Enter Question","error");break}if(!r){const o=t.filter(e=>e.fieldType==="weightedmultiplechoice");if(o.length>0)for(let e=0;e<o.length;e++){const s=o[e];if(!("weightedPoints"in s)||s.weightedPoints===""){i(s.id),c(`Please enter points for ${s.labelName}`,"error");break}else if(!("weightedCorrectAnswer"in s)||s.weightedCorrectAnswer===""){i(s.id),c(`Please enter Correct Answer for ${s.labelName}`,"error");break}else o.length-1===e&&N(t,m)}else N(t,m)}};return l.jsxDEV(b,{sx:{display:"flex"},className:"formBuilder",children:l.jsxDEV(b,{sx:{flexGrow:1},children:[l.jsxDEV(b,{children:l.jsxDEV(b,{container:!0,direction:"row",justifyContent:"space-evenly",alignItems:"center",className:"topBar px-4",children:[l.jsxDEV(h,{children:[l.jsxDEV(ue,{type:"text",variant:"standard",required:!0,error:x,label:"Enter Form Name",className:`form-name-text ${y?"":"d-none"}`,sx:{background:"#fff",borderRadius:"4px","& .MuiOutlinedInput-root .MuiOutlinedInput-notchedOutline":{borderColor:"rgb(187, 186, 184)"},"& .MuiInputBase-input.MuiOutlinedInput-input":{color:"#1A1A1A",fontSize:"13px",fontWeight:600,fontFamily:"Segoe UI"},"& .MuiOutlinedInput-root:hover .MuiOutlinedInput-notchedOutline":{borderColor:"var(--c-primary-color)"},"& .MuiOutlinedInput-root.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"var(--c-primary-color)",borderWidth:"2px"},mb:1,mr:2},placeholder:"",value:m,onChange:r=>{$(r.target.value),z(!1)}},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:419,columnNumber:29},void 0),x&&l.jsxDEV(re,{className:"form-name-error-text",sx:{pb:1},children:" Form name is required."},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:452,columnNumber:47},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:418,columnNumber:25},void 0),l.jsxDEV(h,{children:l.jsxDEV(se,{setFocusId:r=>i(r),customFields:I},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:456,columnNumber:29},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:455,columnNumber:25},void 0),l.jsxDEV(h,{className:"d-flex",children:[L?l.jsxDEV(g,{size:"small",variant:"contained",color:"primary",className:"form-action-btn",sx:{mr:1},onClick:()=>{K(),J(4279)},disabled:t.length===0,children:w?"Update":"Save"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:461,columnNumber:37},void 0):null,j?l.jsxDEV(g,{size:"small",variant:"outlined",color:"secondary",className:"form-action-btn",onClick:B,children:"Cancel"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:467,columnNumber:37},void 0):null]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:458,columnNumber:25},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:410,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:409,columnNumber:17},void 0),l.jsxDEV("div",{className:"mainForm",ref:R,children:[l.jsxDEV(ie,{backend:ce,children:l.jsxDEV(de,{children:t&&(t==null?void 0:t.map((r,o)=>Z(r,o)))},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:478,columnNumber:25},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:477,columnNumber:21},void 0),l.jsxDEV(ae,{openInsertModal:O,closeInsertModal:H,createdFields:t,addElement:C},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:486,columnNumber:21},void 0),l.jsxDEV("br",{},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:501,columnNumber:21},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:475,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:408,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:404,columnNumber:10},void 0)};export{ye as F};
