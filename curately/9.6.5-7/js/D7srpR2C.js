import{Y as X,r as i,R as Z,L as m,A as N,k as e,S as C,B as c,b1 as ee,O as d,T as te,D as S,n as F,o as w,V as p,W as le}from"./DAuuuMsE.js";import{V as ae}from"./_sSW2cUy.js";import{E as ie,b as re,c as se}from"./BZPAOVTJ.js";import{D as me}from"./DOjwGLM0.js";import{l as oe,D as ne}from"./Cg41riQw.js";import{S as ue}from"./68QKccnG.js";import{M as de}from"./Ez4yizbq.js";import{E as ce}from"./BGf89wIa.js";import{T as f}from"./DbsmdDnd.js";import{B as pe}from"./CyNs35Qt.js";import{D as M}from"./Br0xRRVu.js";import{D as fe}from"./C_IKUwSv.js";import"./BestnZaX.js";import"./w5-nO31Y.js";import"./OPHguh9D.js";import"./DistCVVm.js";import"./BqtMM88J.js";import"./IOI02mfF.js";import"./ZuCM0PYB.js";import"./CGk11wqi.js";import"./D2Y9uqkR.js";import"./DVyrZ3Lu.js";import"./DPDHQPP4.js";import"./zQ0bN4E_.js";import"./CDmetmmn.js";import"./C4JXEfII.js";import"./Dsukr_f2.js";import"./1Bak8biM.js";import"./B7U4EVWr.js";import"./JyAhcbJl.js";import"./DA-mmMmo.js";import"./XBS2c42B.js";import"./D1ftmOk2.js";import"./DwmmMyHW.js";import"./BayHs3N0.js";import"./7FOaSWX5.js";import"./rYcqsWUw.js";import"./Bgs2xNBT.js";import"./7BYfJRlb.js";import"./CPvg8iC8.js";const rt=()=>{X();const[D,L]=i.useState(!1),[k,h]=i.useState([]),[ye,x]=Z.useState(!1),[be,R]=i.useState(!1),[Ee,y]=i.useState(!1),[P,Ne]=i.useState(!1),[A,B]=i.useState(0),[g,b]=i.useState(!1),[z,v]=i.useState(null),[E,H]=i.useState("My Templates"),[O,W]=i.useState({}),[G,$]=i.useState({pageIndex:0,pageSize:25}),[r,j]=i.useState({templateName:"",templateId:"",subject:"",description:"",jsonFile:"",htmlFile:"",createdBy:m.getvalue("recrId"),type:1,isActive:!0,clientId:m.getvalue("clientId")}),K=(l,t)=>{H(t),u()},_=["All","My Templates"],J=()=>{v(""),b(!0)},Y=l=>{q(l)},V=l=>{v(l),b(!0)},q=async l=>{le(N.getById("admin","getEmailBuilderTemplatesListById",(l||"")+"/"+m.getvalue("clientId")).then(async t=>{var a,o,n;(a=t.data)!=null&&a.EmailTemplates&&((o=t.data)!=null&&o.EmailTemplates.length)&&((n=t.data)!=null&&n.EmailTemplates[0])&&t.data.EmailTemplates[0].jsonFile?j({templateName:t.data.EmailTemplates[0].templateName?t.data.EmailTemplates[0].templateName:"",templateId:l||"",subject:t.data.EmailTemplates[0].subject?t.data.EmailTemplates[0].subject:"",description:t.data.EmailTemplates[0].description?t.data.EmailTemplates[0].description:"",jsonFile:t.data.EmailTemplates[0].jsonFile?JSON.stringify(t.data.EmailTemplates[0].jsonFile):"",htmlFile:t.data.EmailTemplates[0].htmlFile?t.data.EmailTemplates[0].htmlFile:"",createdBy:m.getvalue("recrId"),type:1,isActive:!0,clientId:m.getvalue("clientId")}):(j({templateName:"",templateId:"",subject:"",description:"",jsonFile:"",htmlFile:"",createdBy:m.getvalue("recrId"),type:1,isActive:!0,clientId:m.getvalue("clientId")}),p("Error loading template","error")),L(!0)}).catch(t=>{console.error("Error:",t)}))},Q=async l=>{let t=m.getvalue("clientId");try{N.deleteById(214,`deleteEmailTemplates/${l}`,t).then(a=>{x(!1),a.data.Success===!0?(p(a.data.Message,"success"),R(o=>!o)):a.data.Error===!0?p(a.data.Message,"error"):p("Something went wrong","error")}).catch(a=>{console.error("Error:",a)})}catch{x(!1)}},I=()=>{b(!1)},T=()=>{L(!1),u()},u=i.useCallback(oe.debounce(async()=>{y(!1);const l=m.getvalue("clientId");let t="0";E==="My Templates"&&(t=m.getvalue("recrId")),N.getCall(214,`getEmailBuilderTemplatesList/${t}/${l}`).then(a=>{if(a.data&&a.data.List){let o=[];for(let n=0;n<a.data.List.length;n++){const s=a.data.List[n];s.type!==0&&o.push({templateId:s.templateId,templateName:s.templateName,description:s.description,subject:s.subject,type:s.type,isactive:s.isactive,createdBy:s.createdBy,createdDate:s.createdDate,modifyBy:s.modifyBy,modifyDate:s.modifyDate})}h(o),B(o.length)}else console.error("List data is undefined."),h([]),B(0);y(!0)}).catch(a=>{console.error("Error:",a),y(!0)})},400),[E]);i.useEffect(()=>(u(),()=>{u.cancel()}),[u]);const U=i.useMemo(()=>[{enableColumnPinning:!0,accessorKey:"templateName",header:"Name",size:300,Cell:({renderedCellValue:l,row:t})=>{let a=t.original.templateName.length>30?t.original.templateName.slice(0,30)+"...":t.original.templateName;return e.jsxDEV(f,{title:t.original.templateName,classes:{tooltip:"tt-capital"},children:e.jsxDEV("span",{className:"hightLightTd",onClick:()=>V(t.original.templateId),children:a},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:343,columnNumber:29},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:342,columnNumber:25},void 0)}},{accessorKey:"modifyDate",header:"Last Modified",accessorFn:l=>`${l.date}`,Cell:({renderedCellValue:l,row:t})=>e.jsxDEV("span",{children:t.original.modifyDate?ne.fromFormat(t.original.modifyDate.substring(0,19),"yyyy-MM-dd hh:mm:ss").toFormat("MM/dd/yyyy hh:mm a"):""},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:358,columnNumber:21},void 0)},{accessorKey:"Actions",header:"Actions",Cell:({renderedCellValue:l,row:t})=>e.jsxDEV(C,{children:e.jsxDEV(pe,{variant:"outlined",id:t.original.templateId,sx:{height:"31px","& .MuiButtonGroup-grouped":{marginRight:"1px",border:"1px solid var(--c-neutral-40)"}},children:[e.jsxDEV(f,{title:"Edit",placement:"top",children:e.jsxDEV(c,{className:"customButtonForHover",sx:{borderColor:"var(--c-neutral-40)",backgroundColor:"#ffffff",color:"#919191",width:"33px"},onClick:()=>V(t.original.templateId),children:e.jsxDEV(ie,{sx:{fontSize:"16px"}},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:416,columnNumber:37},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:405,columnNumber:33},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:401,columnNumber:29},void 0),e.jsxDEV(f,{title:"View",placement:"top",children:e.jsxDEV(c,{className:"customButtonForHover",sx:{borderColor:"var(--c-neutral-40)",backgroundColor:"#ffffff",color:"#919191",width:"33px"},onClick:()=>Y(t.original.templateId),children:e.jsxDEV(ae,{sx:{fontSize:"16px"}},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:441,columnNumber:37},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:430,columnNumber:33},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:426,columnNumber:29},void 0),e.jsxDEV(f,{title:"Delete",placement:"top",children:e.jsxDEV(c,{className:"customButtonForHover",sx:{borderColor:"var(--c-neutral-40)",backgroundColor:"#ffffff",color:"#919191",width:"33px"},onClick:()=>{ee("Are you sure you want to delete - "+t.original.templateName+"?",()=>Q(t.original.templateId))},children:e.jsxDEV(me,{sx:{fontSize:"16px"}},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:471,columnNumber:37},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:455,columnNumber:33},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:451,columnNumber:29},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:387,columnNumber:25},void 0)},t.original.templateId,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:384,columnNumber:21},void 0)}],[]);return e.jsxDEV("div",{className:"emailTemplateList pt-3 px-5",children:[e.jsxDEV(d,{container:!0,direction:"row",className:"customCard px-4 py-2",justifyContent:"space-between",alignItems:"center",display:"flex",sx:{minHeight:"auto !important"},children:[e.jsxDEV(te,{variant:"h6",className:"headerName",children:"Templates"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:506,columnNumber:17},void 0),e.jsxDEV(C,{direction:"row",className:"btn-container",children:e.jsxDEV(c,{variant:"contained",color:"primary",size:"small",onClick:J,children:"Add Template"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:510,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:509,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:497,columnNumber:13},void 0),e.jsxDEV(d,{container:!0,className:"customCard p-0 filterExpand-grid",children:[e.jsxDEV(d,{sx:{width:P?"calc(100%)":"calc(100% - 0px)"},children:e.jsxDEV("div",{className:"MRTableCustom  pl-0 ",children:[e.jsxDEV(re,{value:E,onChange:K,className:"tableTabs",children:_.map((l,t)=>e.jsxDEV(se,{value:l,label:e.jsxDEV("span",{children:l},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:527,columnNumber:41},void 0)},t,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:526,columnNumber:37},void 0))},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:519,columnNumber:25},void 0),e.jsxDEV(de,{columns:U,enableRowSelection:!1,data:k,onRowSelectionChange:W,state:{rowSelection:O,pagination:G},enablePinning:!0,enableStickyHeader:!0,initialState:{columnPinning:{left:["mrt-row-select","templateName"]},density:"compact",showGlobalFilter:!1},enableDensityToggle:!1,enableFullScreenToggle:!0,enableColumnResizing:!0,enableFilters:!1,enableGlobalFilterModes:!0,columnResizeMode:"onChange",onPaginationChange:$,getRowId:l=>l.templateId,icons:{ArrowDownwardIcon:l=>e.jsxDEV(ue,{...l},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:554,columnNumber:68},void 0)},rowCount:A},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:532,columnNumber:25},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:518,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:516,columnNumber:17},void 0),D?e.jsxDEV(S,{open:D,onClose:T,className:"Instructions",fullWidth:!0,maxWidth:"md",children:[e.jsxDEV(M,{className:"py-2",children:e.jsxDEV(d,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxDEV("span",{children:r&&(r==null?void 0:r.templateName)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:592,columnNumber:37},void 0),e.jsxDEV("span",{onClick:T,className:"closePopup",children:e.jsxDEV(F,{},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:596,columnNumber:41},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:595,columnNumber:37},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:586,columnNumber:33},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:583,columnNumber:29},void 0),e.jsxDEV(fe,{},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:600,columnNumber:29},void 0),e.jsxDEV(w,{sx:{p:0},children:r&&(r!=null&&r.htmlFile)?e.jsxDEV("div",{style:{padding:"20px"},dangerouslySetInnerHTML:{__html:r==null?void 0:r.htmlFile}},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:604,columnNumber:41},void 0):null},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:601,columnNumber:29},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:582,columnNumber:25},void 0):null,g?e.jsxDEV(S,{maxWidth:"xl",open:g,onClose:I,fullWidth:!0,children:[e.jsxDEV(M,{id:"alert-dialog-title",children:e.jsxDEV(d,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxDEV("span",{style:{fontWeight:"bold"},children:"Email Template "},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:621,columnNumber:35},void 0),e.jsxDEV("span",{onClick:I,children:e.jsxDEV(F,{},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:623,columnNumber:39},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:622,columnNumber:35},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:615,columnNumber:23},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:614,columnNumber:23},void 0),e.jsxDEV(w,{children:e.jsxDEV(e.Fragment,{children:e.jsxDEV(ce,{templateId:z},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:630,columnNumber:31},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:629,columnNumber:31},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:628,columnNumber:27},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:613,columnNumber:23},void 0):null]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:514,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:496,columnNumber:9},void 0)};export{rt as default};
