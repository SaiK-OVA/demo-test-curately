import{r as h,j as Re,v as Me}from"./DAuuuMsE.js";import{r as _e}from"./C148XJoK.js";const ge=h.createContext({dragDropManager:void 0});var K=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),ee=function(){return Math.random().toString(36).substring(7).split("").join(".")},te={INIT:"@@redux/INIT"+ee(),REPLACE:"@@redux/REPLACE"+ee()};function Le(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function He(t){if(t===void 0)return"undefined";if(t===null)return"null";var e=typeof t;switch(e){case"boolean":case"string":case"number":case"symbol":case"function":return e}if(Array.isArray(t))return"array";if(je(t))return"date";if(Ae(t))return"error";var r=ke(t);switch(r){case"Symbol":case"Promise":case"WeakMap":case"WeakSet":case"Map":case"Set":return r}return e.slice(8,-1).toLowerCase().replace(/\s/g,"")}function ke(t){return typeof t.constructor=="function"?t.constructor.name:null}function Ae(t){return t instanceof Error||typeof t.message=="string"&&t.constructor&&typeof t.constructor.stackTraceLimit=="number"}function je(t){return t instanceof Date?!0:typeof t.toDateString=="function"&&typeof t.getDate=="function"&&typeof t.setDate=="function"}function I(t){var e=typeof t;return e=He(t),e}function fe(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.");if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error("Expected the enhancer to be a function. Instead, received: '"+I(r)+"'");return r(fe)(t,e)}if(typeof t!="function")throw new Error("Expected the root reducer to be a function. Instead, received: '"+I(t)+"'");var i=t,s=e,o=[],a=o,c=!1;function l(){a===o&&(a=o.slice())}function f(){if(c)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return s}function v(g){if(typeof g!="function")throw new Error("Expected the listener to be a function. Instead, received: '"+I(g)+"'");if(c)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api/store#subscribelistener for more details.");var m=!0;return l(),a.push(g),function(){if(m){if(c)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api/store#subscribelistener for more details.");m=!1,l();var S=a.indexOf(g);a.splice(S,1),o=null}}}function p(g){if(!Le(g))throw new Error("Actions must be plain objects. Instead, the actual type was: '"+I(g)+"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.");if(typeof g.type>"u")throw new Error('Actions may not have an undefined "type" property. You may have misspelled an action type string constant.');if(c)throw new Error("Reducers may not dispatch actions.");try{c=!0,s=i(s,g)}finally{c=!1}for(var m=o=a,y=0;y<m.length;y++){var S=m[y];S()}return g}function d(g){if(typeof g!="function")throw new Error("Expected the nextReducer to be a function. Instead, received: '"+I(g));i=g,p({type:te.REPLACE})}function D(){var g,m=v;return g={subscribe:function(S){if(typeof S!="object"||S===null)throw new Error("Expected the observer to be an object. Instead, received: '"+I(S)+"'");function O(){S.next&&S.next(f())}O();var H=m(O);return{unsubscribe:H}}},g[K]=function(){return this},g}return p({type:te.INIT}),n={dispatch:p,subscribe:v,getState:f,replaceReducer:d},n[K]=D,n}function u(t,e,...r){if(!t){let n;if(e===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;n=new Error(e.replace(/%s/g,function(){return r[i++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function Ue(t,e,r){return e.split(".").reduce((n,i)=>n&&n[i]?n[i]:r||null,t)}function Fe(t,e){return t.filter(r=>r!==e)}function he(t){return typeof t=="object"}function qe(t,e){const r=new Map,n=s=>{r.set(s,r.has(s)?r.get(s)+1:1)};t.forEach(n),e.forEach(n);const i=[];return r.forEach((s,o)=>{s===1&&i.push(o)}),i}function $e(t,e){return t.filter(r=>e.indexOf(r)>-1)}const B="dnd-core/INIT_COORDS",N="dnd-core/BEGIN_DRAG",X="dnd-core/PUBLISH_DRAG_SOURCE",R="dnd-core/HOVER",M="dnd-core/DROP",_="dnd-core/END_DRAG";function re(t,e){return{type:B,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const Ge={type:B,payload:{clientOffset:null,sourceClientOffset:null}};function Ye(t){return function(r=[],n={publishSource:!0}){const{publishSource:i=!0,clientOffset:s,getSourceClientOffset:o}=n,a=t.getMonitor(),c=t.getRegistry();t.dispatch(re(s)),Ve(r,a,c);const l=We(r,a);if(l==null){t.dispatch(Ge);return}let f=null;if(s){if(!o)throw new Error("getSourceClientOffset must be defined");Be(o),f=o(l)}t.dispatch(re(s,f));const p=c.getSource(l).beginDrag(a,l);if(p==null)return;Xe(p),c.pinSource(l);const d=c.getSourceType(l);return{type:N,payload:{itemType:d,item:p,sourceId:l,clientOffset:s||null,sourceClientOffset:f||null,isSourcePublic:!!i}}}}function Ve(t,e,r){u(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(n){u(r.getSource(n),"Expected sourceIds to be registered.")})}function Be(t){u(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Xe(t){u(he(t),"Item must be an object.")}function We(t,e){let r=null;for(let n=t.length-1;n>=0;n--)if(e.canDragSource(t[n])){r=t[n];break}return r}function ze(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){ze(t,i,r[i])})}return t}function Je(t){return function(r={}){const n=t.getMonitor(),i=t.getRegistry();Ze(n),tt(n).forEach((o,a)=>{const c=Ke(o,a,i,n),l={type:M,payload:{dropResult:Qe({},r,c)}};t.dispatch(l)})}}function Ze(t){u(t.isDragging(),"Cannot call drop while not dragging."),u(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function Ke(t,e,r,n){const i=r.getTarget(t);let s=i?i.drop(n,t):void 0;return et(s),typeof s>"u"&&(s=e===0?{}:n.getDropResult()),s}function et(t){u(typeof t>"u"||he(t),"Drop result must either be an object or undefined.")}function tt(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function rt(t){return function(){const r=t.getMonitor(),n=t.getRegistry();nt(r);const i=r.getSourceId();return i!=null&&(n.getSource(i,!0).endDrag(r,i),n.unpinSource()),{type:_}}}function nt(t){u(t.isDragging(),"Cannot call endDrag while not dragging.")}function q(t,e){return e===null?t===null:Array.isArray(t)?t.some(r=>r===e):t===e}function it(t){return function(r,{clientOffset:n}={}){st(r);const i=r.slice(0),s=t.getMonitor(),o=t.getRegistry(),a=s.getItemType();return at(i,o,a),ot(i,s,o),ct(i,s,o),{type:R,payload:{targetIds:i,clientOffset:n||null}}}}function st(t){u(Array.isArray(t),"Expected targetIds to be an array.")}function ot(t,e,r){u(e.isDragging(),"Cannot call hover while not dragging."),u(!e.didDrop(),"Cannot call hover after drop.");for(let n=0;n<t.length;n++){const i=t[n];u(t.lastIndexOf(i)===n,"Expected targetIds to be unique in the passed array.");const s=r.getTarget(i);u(s,"Expected targetIds to be registered.")}}function at(t,e,r){for(let n=t.length-1;n>=0;n--){const i=t[n],s=e.getTargetType(i);q(s,r)||t.splice(n,1)}}function ct(t,e,r){t.forEach(function(n){r.getTarget(n).hover(e,n)})}function ut(t){return function(){if(t.getMonitor().isDragging())return{type:X}}}function dt(t){return{beginDrag:Ye(t),publishDragSource:ut(t),hover:it(t),drop:Je(t),endDrag:rt(t)}}class lt{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:r}=this.store;function n(s){return(...o)=>{const a=s.apply(e,o);typeof a<"u"&&r(a)}}const i=dt(this);return Object.keys(i).reduce((s,o)=>{const a=i[o];return s[o]=n(a),s},{})}dispatch(e){this.store.dispatch(e)}constructor(e,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=r,e.subscribe(this.handleRefCountChange)}}function gt(t,e){return{x:t.x+e.x,y:t.y+e.y}}function pe(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ft(t){const{clientOffset:e,initialClientOffset:r,initialSourceClientOffset:n}=t;return!e||!r||!n?null:pe(gt(e,n),r)}function ht(t){const{clientOffset:e,initialClientOffset:r}=t;return!e||!r?null:pe(e,r)}const C=[],W=[];C.__IS_NONE__=!0;W.__IS_ALL__=!0;function pt(t,e){return t===C?!1:t===W||typeof e>"u"?!0:$e(e,t).length>0}class vt{subscribeToStateChange(e,r={}){const{handlerIds:n}=r;u(typeof e=="function","listener must be a function."),u(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId;const s=()=>{const o=this.store.getState(),a=o.stateId;try{a===i||a===i+1&&!pt(o.dirtyHandlerIds,n)||e()}finally{i=a}};return this.store.subscribe(s)}subscribeToOffsetChange(e){u(typeof e=="function","listener must be a function.");let r=this.store.getState().dragOffset;const n=()=>{const i=this.store.getState().dragOffset;i!==r&&(r=i,e())};return this.store.subscribe(n)}canDragSource(e){if(!e)return!1;const r=this.registry.getSource(e);return u(r,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:r.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const r=this.registry.getTarget(e);if(u(r,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(e),i=this.getItemType();return q(n,i)&&r.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const r=this.registry.getSource(e,!0);if(u(r,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(e),i=this.getItemType();return n!==i?!1:r.isDragging(this,e)}isOverTarget(e,r={shallow:!1}){if(!e)return!1;const{shallow:n}=r;if(!this.isDragging())return!1;const i=this.registry.getTargetType(e),s=this.getItemType();if(s&&!q(i,s))return!1;const o=this.getTargetIds();if(!o.length)return!1;const a=o.indexOf(e);return n?a===o.length-1:a>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return ft(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return ht(this.store.getState().dragOffset)}constructor(e,r){this.store=e,this.registry=r}}const ne=typeof global<"u"?global:self,ve=ne.MutationObserver||ne.WebKitMutationObserver;function me(t){return function(){const r=setTimeout(i,0),n=setInterval(i,50);function i(){clearTimeout(r),clearInterval(n),t()}}}function mt(t){let e=1;const r=new ve(t),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}const Dt=typeof ve=="function"?mt:me;class yt{enqueueTask(e){const{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const r=this.index;if(this.index++,e[r].call(),this.index>this.capacity){for(let n=0,i=e.length-this.index;n<i;n++)e[n]=e[n+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=Dt(this.flush),this.requestErrorThrow=me(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class St{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,r){this.onError=e,this.release=r,this.task=null}}class Tt{create(e){const r=this.freeTasks,n=r.length?r.pop():new St(this.onError,i=>r[r.length]=i);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}const De=new yt,Ot=new Tt(De.registerPendingError);function bt(t){De.enqueueTask(Ot.create(t))}const z="dnd-core/ADD_SOURCE",Q="dnd-core/ADD_TARGET",J="dnd-core/REMOVE_SOURCE",L="dnd-core/REMOVE_TARGET";function It(t){return{type:z,payload:{sourceId:t}}}function Et(t){return{type:Q,payload:{targetId:t}}}function wt(t){return{type:J,payload:{sourceId:t}}}function Ct(t){return{type:L,payload:{targetId:t}}}function Pt(t){u(typeof t.canDrag=="function","Expected canDrag to be a function."),u(typeof t.beginDrag=="function","Expected beginDrag to be a function."),u(typeof t.endDrag=="function","Expected endDrag to be a function.")}function xt(t){u(typeof t.canDrop=="function","Expected canDrop to be a function."),u(typeof t.hover=="function","Expected hover to be a function."),u(typeof t.drop=="function","Expected beginDrag to be a function.")}function $(t,e){if(e&&Array.isArray(t)){t.forEach(r=>$(r,!1));return}u(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var T;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(T||(T={}));let Nt=0;function Rt(){return Nt++}function Mt(t){const e=Rt().toString();switch(t){case T.SOURCE:return`S${e}`;case T.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function ie(t){switch(t[0]){case"S":return T.SOURCE;case"T":return T.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function se(t,e){const r=t.entries();let n=!1;do{const{done:i,value:[,s]}=r.next();if(s===e)return!0;n=!!i}while(!n);return!1}class _t{addSource(e,r){$(e),Pt(r);const n=this.addHandler(T.SOURCE,e,r);return this.store.dispatch(It(n)),n}addTarget(e,r){$(e,!0),xt(r);const n=this.addHandler(T.TARGET,e,r);return this.store.dispatch(Et(n)),n}containsHandler(e){return se(this.dragSources,e)||se(this.dropTargets,e)}getSource(e,r=!1){return u(this.isSourceId(e),"Expected a valid source ID."),r&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return u(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return u(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return u(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return ie(e)===T.SOURCE}isTargetId(e){return ie(e)===T.TARGET}removeSource(e){u(this.getSource(e),"Expected an existing source."),this.store.dispatch(wt(e)),bt(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){u(this.getTarget(e),"Expected an existing target."),this.store.dispatch(Ct(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const r=this.getSource(e);u(r,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=r}unpinSource(){u(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,r,n){const i=Mt(e);return this.types.set(i,r),e===T.SOURCE?this.dragSources.set(i,n):e===T.TARGET&&this.dropTargets.set(i,n),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const Lt=(t,e)=>t===e;function Ht(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function kt(t,e,r=Lt){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!r(t[n],e[n]))return!1;return!0}function At(t=C,e){switch(e.type){case R:break;case z:case Q:case L:case J:return C;case N:case X:case _:case M:default:return W}const{targetIds:r=[],prevTargetIds:n=[]}=e.payload,i=qe(r,n);if(!(i.length>0||!kt(r,n)))return C;const o=n[n.length-1],a=r[r.length-1];return o!==a&&(o&&i.push(o),a&&i.push(a)),i}function jt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ut(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){jt(t,i,r[i])})}return t}const oe={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Ft(t=oe,e){const{payload:r}=e;switch(e.type){case B:case N:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case R:return Ht(t.clientOffset,r.clientOffset)?t:Ut({},t,{clientOffset:r.clientOffset});case _:case M:return oe;default:return t}}function qt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function E(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){qt(t,i,r[i])})}return t}const $t={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Gt(t=$t,e){const{payload:r}=e;switch(e.type){case N:return E({},t,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case X:return E({},t,{isSourcePublic:!0});case R:return E({},t,{targetIds:r.targetIds});case L:return t.targetIds.indexOf(r.targetId)===-1?t:E({},t,{targetIds:Fe(t.targetIds,r.targetId)});case M:return E({},t,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case _:return E({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function Yt(t=0,e){switch(e.type){case z:case Q:return t+1;case J:case L:return t-1;default:return t}}function Vt(t=0){return t+1}function Bt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){Bt(t,i,r[i])})}return t}function Wt(t={},e){return{dirtyHandlerIds:At(t.dirtyHandlerIds,{type:e.type,payload:Xt({},e.payload,{prevTargetIds:Ue(t,"dragOperation.targetIds",[])})}),dragOffset:Ft(t.dragOffset,e),refCount:Yt(t.refCount,e),dragOperation:Gt(t.dragOperation,e),stateId:Vt(t.stateId)}}function zt(t,e=void 0,r={},n=!1){const i=Qt(n),s=new vt(i,new _t(i)),o=new lt(i,s),a=t(o,e,r);return o.receiveBackend(a),o}function Qt(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return fe(Wt,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function Jt(t,e){if(t==null)return{};var r=Zt(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Zt(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}let ae=0;const x=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var Yr=h.memo(function(e){var{children:r}=e,n=Jt(e,["children"]);const[i,s]=Kt(n);return h.useEffect(()=>{if(s){const o=ye();return++ae,()=>{--ae===0&&(o[x]=null)}}},[]),Re.jsx(ge.Provider,{value:i,children:r})});function Kt(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=er(t.backend,t.context,t.options,t.debugMode),r=!t.context;return[e,r]}function er(t,e=ye(),r,n){const i=e;return i[x]||(i[x]={dragDropManager:zt(t,e,r,n)}),i[x]}function ye(){return typeof global<"u"?global:window}var tr=_e();const rr=Me(tr),b=typeof window<"u"?h.useLayoutEffect:h.useEffect;function nr(t,e,r){const[n,i]=h.useState(()=>e(t)),s=h.useCallback(()=>{const o=e(t);rr(n,o)||(i(o),r&&r())},[n,t,r]);return b(s),[n,s]}function ir(t,e,r){const[n,i]=nr(t,e,r);return b(function(){const o=t.getHandlerId();if(o!=null)return t.subscribeToStateChange(i,{handlerIds:[o]})},[t,i]),n}function Se(t,e,r){return ir(e,t||(()=>({})),()=>r.reconnect())}function Te(t,e){const r=[];return typeof t!="function"&&r.push(t),h.useMemo(()=>typeof t=="function"?t():t,r)}function sr(t){return h.useMemo(()=>t.hooks.dragSource(),[t])}function or(t){return h.useMemo(()=>t.hooks.dragPreview(),[t])}let k=!1,A=!1;class ar{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){u(!k,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return k=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{k=!1}}isDragging(){if(!this.sourceId)return!1;u(!A,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return A=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{A=!1}}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,r){return this.internalMonitor.isOverTarget(e,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let j=!1;class cr{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}canDrop(){if(!this.targetId)return!1;u(!j,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return j=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{j=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function ur(t,e,r){const n=r.getRegistry(),i=n.addTarget(t,e);return[i,()=>n.removeTarget(i)]}function dr(t,e,r){const n=r.getRegistry(),i=n.addSource(t,e);return[i,()=>n.removeSource(i)]}function G(t,e,r,n){let i;if(i!==void 0)return!!i;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const s=Object.keys(t),o=Object.keys(e);if(s.length!==o.length)return!1;const a=Object.prototype.hasOwnProperty.bind(e);for(let c=0;c<s.length;c++){const l=s[c];if(!a(l))return!1;const f=t[l],v=e[l];if(i=void 0,i===!1||i===void 0&&f!==v)return!1}return!0}function Y(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function lr(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function gr(t){return(e=null,r=null)=>{if(!h.isValidElement(e)){const s=e;return t(s,r),s}const n=e;return lr(n),fr(n,r?s=>t(s,r):t)}}function Oe(t){const e={};return Object.keys(t).forEach(r=>{const n=t[r];if(r.endsWith("Ref"))e[r]=t[r];else{const i=gr(n);e[r]=()=>i}}),e}function ce(t,e){typeof t=="function"?t(e):t.current=e}function fr(t,e){const r=t.ref;return u(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?h.cloneElement(t,{ref:n=>{ce(r,n),ce(e,n)}}):h.cloneElement(t,{ref:e})}class hr{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?e?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),r):(this.lastConnectedDragSource=e,r):r}reconnectDragPreview(e=!1){const r=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!G(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!G(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=Oe({dragSource:(r,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,Y(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,Y(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class pr{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const r=this.dropTarget;if(this.handlerId){if(!r){this.lastConnectedDropTarget=r;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!G(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=Oe({dropTarget:(r,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,Y(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function w(){const{dragDropManager:t}=h.useContext(ge);return u(t!=null,"Expected drag drop context"),t}function vr(t,e){const r=w(),n=h.useMemo(()=>new hr(r.getBackend()),[r]);return b(()=>(n.dragSourceOptions=t||null,n.reconnect(),()=>n.disconnectDragSource()),[n,t]),b(()=>(n.dragPreviewOptions=e||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,e]),n}function mr(){const t=w();return h.useMemo(()=>new ar(t),[t])}class Dr{beginDrag(){const e=this.spec,r=this.monitor;let n=null;return typeof e.item=="object"?n=e.item:typeof e.item=="function"?n=e.item(r):n={},n??null}canDrag(){const e=this.spec,r=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(r):!0}isDragging(e,r){const n=this.spec,i=this.monitor,{isDragging:s}=n;return s?s(i):r===e.getSourceId()}endDrag(){const e=this.spec,r=this.monitor,n=this.connector,{end:i}=e;i&&i(r.getItem(),r),n.reconnect()}constructor(e,r,n){this.spec=e,this.monitor=r,this.connector=n}}function yr(t,e,r){const n=h.useMemo(()=>new Dr(t,e,r),[e,r]);return h.useEffect(()=>{n.spec=t},[t]),n}function Sr(t){return h.useMemo(()=>{const e=t.type;return u(e!=null,"spec.type must be defined"),e},[t])}function Tr(t,e,r){const n=w(),i=yr(t,e,r),s=Sr(t);b(function(){if(s!=null){const[a,c]=dr(s,i,n);return e.receiveHandlerId(a),r.receiveHandlerId(a),c}},[n,e,r,i,s])}function Vr(t,e){const r=Te(t);u(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=mr(),i=vr(r.options,r.previewOptions);return Tr(r,n,i),[Se(r.collect,n,i),sr(i),or(i)]}function Or(t){return h.useMemo(()=>t.hooks.dropTarget(),[t])}function br(t){const e=w(),r=h.useMemo(()=>new pr(e.getBackend()),[e]);return b(()=>(r.dropTargetOptions=t||null,r.reconnect(),()=>r.disconnectDropTarget()),[t]),r}function Ir(){const t=w();return h.useMemo(()=>new cr(t),[t])}function Er(t){const{accept:e}=t;return h.useMemo(()=>(u(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class wr{canDrop(){const e=this.spec,r=this.monitor;return e.canDrop?e.canDrop(r.getItem(),r):!0}hover(){const e=this.spec,r=this.monitor;e.hover&&e.hover(r.getItem(),r)}drop(){const e=this.spec,r=this.monitor;if(e.drop)return e.drop(r.getItem(),r)}constructor(e,r){this.spec=e,this.monitor=r}}function Cr(t,e){const r=h.useMemo(()=>new wr(t,e),[e]);return h.useEffect(()=>{r.spec=t},[t]),r}function Pr(t,e,r){const n=w(),i=Cr(t,e),s=Er(t);b(function(){const[a,c]=ur(s,i,n);return e.receiveHandlerId(a),r.receiveHandlerId(a),c},[n,e,i,r,s.map(o=>o.toString()).join("|")])}function Br(t,e){const r=Te(t),n=Ir(),i=br(r.options);return Pr(r,n,i),[Se(r.collect,n,i),Or(i)]}function be(t){let e=null;return()=>(e==null&&(e=t()),e)}function xr(t,e){return t.filter(r=>r!==e)}function Nr(t,e){const r=new Set,n=s=>r.add(s);t.forEach(n),e.forEach(n);const i=[];return r.forEach(s=>i.push(s)),i}class Rr{enter(e){const r=this.entered.length,n=i=>this.isNodeInDocument(i)&&(!i.contains||i.contains(e));return this.entered=Nr(this.entered.filter(n),[e]),r===0&&this.entered.length>0}leave(e){const r=this.entered.length;return this.entered=xr(this.entered.filter(this.isNodeInDocument),e),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class Mr{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const r={};Object.keys(this.config.exposeProperties).forEach(n=>{const i=this.config.exposeProperties[n];i!=null&&(r[n]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,r){return r===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const Ie="__NATIVE_FILE__",Ee="__NATIVE_URL__",we="__NATIVE_TEXT__",Ce="__NATIVE_HTML__",ue=Object.freeze(Object.defineProperty({__proto__:null,FILE:Ie,HTML:Ce,TEXT:we,URL:Ee},Symbol.toStringTag,{value:"Module"}));function U(t,e,r){const n=e.reduce((i,s)=>i||t.getData(s),"");return n??r}const V={[Ie]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[Ce]:{exposeProperties:{html:(t,e)=>U(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[Ee]:{exposeProperties:{urls:(t,e)=>U(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[we]:{exposeProperties:{text:(t,e)=>U(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function _r(t,e){const r=V[t];if(!r)throw new Error(`native type ${t} has no configuration`);const n=new Mr(r);return n.loadDataTransfer(e),n}function F(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(V).filter(r=>{const n=V[r];return n!=null&&n.matchesTypes?n.matchesTypes.some(i=>e.indexOf(i)>-1):!1})[0]||null}const Lr=be(()=>/firefox/i.test(navigator.userAgent)),Pe=be(()=>!!window.safari);class de{interpolate(e){const{xs:r,ys:n,c1s:i,c2s:s,c3s:o}=this;let a=r.length-1;if(e===r[a])return n[a];let c=0,l=o.length-1,f;for(;c<=l;){f=Math.floor(.5*(c+l));const d=r[f];if(d<e)c=f+1;else if(d>e)l=f-1;else return n[f]}a=Math.max(0,l);const v=e-r[a],p=v*v;return n[a]+i[a]*v+s[a]*p+o[a]*v*p}constructor(e,r){const{length:n}=e,i=[];for(let d=0;d<n;d++)i.push(d);i.sort((d,D)=>e[d]<e[D]?-1:1);const s=[],o=[];let a,c;for(let d=0;d<n-1;d++)a=e[d+1]-e[d],c=r[d+1]-r[d],s.push(a),o.push(c/a);const l=[o[0]];for(let d=0;d<s.length-1;d++){const D=o[d],g=o[d+1];if(D*g<=0)l.push(0);else{a=s[d];const m=s[d+1],y=a+m;l.push(3*y/((y+m)/D+(y+a)/g))}}l.push(o[o.length-1]);const f=[],v=[];let p;for(let d=0;d<l.length-1;d++){p=o[d];const D=l[d],g=1/s[d],m=D+l[d+1]-p-p;f.push((p-D-m)*g),v.push(m*g*g)}this.xs=e,this.ys=r,this.c1s=l,this.c2s=f,this.c3s=v}}const Hr=1;function xe(t){const e=t.nodeType===Hr?t:t.parentElement;if(!e)return null;const{top:r,left:n}=e.getBoundingClientRect();return{x:n,y:r}}function P(t){return{x:t.clientX,y:t.clientY}}function kr(t){var e;return t.nodeName==="IMG"&&(Lr()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function Ar(t,e,r,n){let i=t?e.width:r,s=t?e.height:n;return Pe()&&t&&(s/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:s}}function jr(t,e,r,n,i){const s=kr(e),a=xe(s?t:e),c={x:r.x-a.x,y:r.y-a.y},{offsetWidth:l,offsetHeight:f}=t,{anchorX:v,anchorY:p}=n,{dragPreviewWidth:d,dragPreviewHeight:D}=Ar(s,e,l,f),g=()=>{let Z=new de([0,.5,1],[c.y,c.y/f*D,c.y+D-f]).interpolate(p);return Pe()&&s&&(Z+=(window.devicePixelRatio-1)*D),Z},m=()=>new de([0,.5,1],[c.x,c.x/l*d,c.x+d-l]).interpolate(v),{offsetX:y,offsetY:S}=i,O=y===0||y,H=S===0||S;return{x:O?y:m(),y:H?S:g()}}class Ur{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,r){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=r}}function Fr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function le(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){Fr(t,i,r[i])})}return t}class qr{profile(){var e,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,r,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,r),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,r,n){this.sourceNodes.set(e,r),this.sourceNodeOptions.set(e,n);const i=o=>this.handleDragStart(o,e),s=o=>this.handleSelectStart(o);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",i),r.addEventListener("selectstart",s),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),r.removeEventListener("dragstart",i),r.removeEventListener("selectstart",s),r.setAttribute("draggable","false")}}connectDropTarget(e,r){const n=o=>this.handleDragEnter(o,e),i=o=>this.handleDragOver(o,e),s=o=>this.handleDrop(o,e);return r.addEventListener("dragenter",n),r.addEventListener("dragover",i),r.addEventListener("drop",s),()=>{r.removeEventListener("dragenter",n),r.removeEventListener("dragover",i),r.removeEventListener("drop",s)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(e);return le({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(e);return le({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(ue).some(r=>ue[r]===e)}beginDragNativeItem(e,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=_r(e,r),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,r){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(e,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(e,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(e,r){this.dropTargetIds.unshift(r)}constructor(e,r,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=i=>{const s=this.sourceNodes.get(i);return s&&xe(s)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=i=>!!(i&&this.document&&this.document.body&&this.document.body.contains(i)),this.endDragIfSourceWasRemovedFromDOM=()=>{const i=this.currentDragSourceNode;i==null||this.isNodeInDocument(i)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=i=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(i||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=i=>{if(i.defaultPrevented)return;const{dragStartSourceIds:s}=this;this.dragStartSourceIds=null;const o=P(i);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(s||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:a}=i,c=F(a);if(this.monitor.isDragging()){if(a&&typeof a.setDragImage=="function"){const f=this.monitor.getSourceId(),v=this.sourceNodes.get(f),p=this.sourcePreviewNodes.get(f)||v;if(p){const{anchorX:d,anchorY:D,offsetX:g,offsetY:m}=this.getCurrentSourcePreviewNodeOptions(),O=jr(v,p,o,{anchorX:d,anchorY:D},{offsetX:g,offsetY:m});a.setDragImage(p,O.x,O.y)}}try{a==null||a.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(i.target);const{captureDraggingState:l}=this.getCurrentSourcePreviewNodeOptions();l?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(c)this.beginDragNativeItem(c);else{if(a&&!a.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=i=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}if(!this.enterLeaveCounter.enter(i.target)||this.monitor.isDragging())return;const{dataTransfer:a}=i,c=F(a);c&&this.beginDragNativeItem(c,a)},this.handleTopDragEnter=i=>{const{dragEnterTargetIds:s}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=i.altKey,s.length>0&&this.actions.hover(s,{clientOffset:P(i)}),s.some(a=>this.monitor.canDropOnTarget(a))&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=i=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}},this.handleTopDragOver=i=>{const{dragOverTargetIds:s}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}this.altKeyPressed=i.altKey,this.lastClientOffset=P(i),this.scheduleHover(s),(s||[]).some(a=>this.monitor.canDropOnTarget(a))?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=i=>{this.isDraggingNativeItem()&&i.preventDefault(),this.enterLeaveCounter.leave(i.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=i=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var s;i.preventDefault(),(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}else F(i.dataTransfer)&&i.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=i=>{const{dropTargetIds:s}=this;this.dropTargetIds=[],this.actions.hover(s,{clientOffset:P(i)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=i=>{const s=i.target;typeof s.dragDrop=="function"&&(s.tagName==="INPUT"||s.tagName==="SELECT"||s.tagName==="TEXTAREA"||s.isContentEditable||(i.preventDefault(),s.dragDrop()))},this.options=new Ur(r,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new Rr(this.isNodeInDocument)}}const Xr=function(e,r,n){return new qr(e,r,n)};export{Yr as D,Xr as H,Vr as a,ge as b,Br as u};
