import{L as s,r as a,W as C,A as x,V as r,k as e,D as ie,I as F,n as oe,o as se,S as A,B as E,U as le,O as G,T as re,b1 as ne}from"./DAuuuMsE.js";import{D as ce}from"./DOjwGLM0.js";import{V as ue}from"./BjMtxRen.js";import{S as me}from"./68QKccnG.js";import{M as fe}from"./Ez4yizbq.js";import{L as be}from"./QwUMPYgi.js";import{C as ge}from"./B7IUApoB.js";import{l as K}from"./Cg41riQw.js";import{u as Ve}from"./D1ftmOk2.js";import"./DwmmMyHW.js";import{D as ye}from"./Br0xRRVu.js";import{T as pe}from"./BestnZaX.js";import{V as De}from"./C2k7UdtN.js";import{T as _}from"./DbsmdDnd.js";import{b as he,c as H}from"./BZPAOVTJ.js";import"./ZuCM0PYB.js";import"./CGk11wqi.js";import"./D2Y9uqkR.js";import"./DVyrZ3Lu.js";import"./DPDHQPP4.js";import"./zQ0bN4E_.js";import"./CDmetmmn.js";import"./BqtMM88J.js";import"./w5-nO31Y.js";import"./C4JXEfII.js";import"./DistCVVm.js";import"./Dsukr_f2.js";import"./OPHguh9D.js";import"./1Bak8biM.js";import"./B7U4EVWr.js";import"./C_IKUwSv.js";import"./JyAhcbJl.js";import"./DA-mmMmo.js";import"./XBS2c42B.js";import"./IOI02mfF.js";const Ne=({open:j,handleClose:y,add:D,videoData:o,onVideoSaveSuccess:w})=>{const T=o?{Cameratagid:o?o.Cameratagid:"",autoId:o?o.autoId:"",clientId:s.getvalue("clientId"),createdDate:o?o.createdDate:"",label:o?o.label:"",recrId:o?o.recrId:"",recrName:o?o.recrName:""}:{Cameratagid:"",autoId:"",createdDate:"",label:"",recrId:"",recrName:"",clientId:s.getvalue("clientId")},c=Ve({initialValues:T,onSubmit:()=>{},validateOnMount:!0}),L=()=>{y(!1),c.resetForm()},[v,p]=a.useState(""),[b,S]=a.useState({cameratagId:"",label:""}),[g,h]=a.useState(!1);a.useLayoutEffect(()=>(p(`${window.location.protocol==="https:"?"https://app.curately.ai":"http://52.41.18.83:41088"}/Accuick_API/CameraTagAccountManager.html?recrId=${s.getvalue("recrId")}`),window.addEventListener("message",u),()=>window.removeEventListener("message",u)),[]);const V=a.useRef(null);a.useEffect(()=>{const d=V.current,n=()=>{};return d&&d.addEventListener("load",n),()=>{d&&d.removeEventListener("load",n)}},[v,V]);const u=d=>{if(d.data.addCameraTagVideo){let n={cameratagId:d.data.videoUrl,label:d.data.title,createdBy:s.getvalue("recrId"),clientId:s.getvalue("clientId")};S({cameratagId:d.data.videoUrl,label:d.data.title}),p(""),C(x.postWithData("admin","savevideo",n).then(I=>{console.log(I.data),I.data.Success?(h(!1),y(!1),w(),r("Video added successfully.","success"),p(`${window.location.protocol==="https:"?"https://app.curately.ai":"http://52.41.18.83:41088"}/Accuick_API/CameraTagAccountManager.html?recrId=${s.getvalue("recrId")}`),S({cameratagId:"",label:""})):(h(!0),r(I.data.Message,"error"))}))}},M=()=>{[null,void 0,"",0].includes(b.label)||u({data:{addCameraTagVideo:!0,title:b.label,videoUrl:b.cameratagId,action:""}})},P=()=>{if(c.values.label.trim()==="")return r("Please Enter label name","error"),!1;if(c.values.autoId==="")return r("Please select 'title Type","error"),!1;c.isValid?C(x.postWithData("admin","updateVideo",{...c.values}).then(d=>{var n;(n=d==null?void 0:d.data)!=null&&n.Success?(r("Video has been updated successfully.","success"),c.resetForm(),y(!0)):r(d.data.Message?d.data.Message:"An error occured","error")})):r("Please fill all fields.","error")};return e.jsxDEV(ie,{open:j,onClose:y,maxWidth:g?"xs":"md",fullWidth:!0,children:[e.jsxDEV(ye,{children:[g?"Update Title":D?"Add":"Update"," Video"]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:229,columnNumber:7},void 0),e.jsxDEV(F,{"aria-label":"close",onClick:L,sx:{position:"absolute",right:8,top:8,color:d=>d.palette.grey[500]},children:e.jsxDEV(oe,{},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:240,columnNumber:9},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:230,columnNumber:7},void 0),e.jsxDEV(se,{children:e.jsxDEV("div",{id:"AddVideo",className:"p-4",children:[v?e.jsxDEV("iframe",{src:v,ref:V,title:"Recording Video",className:"iframeInApp"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:245,columnNumber:13},void 0):null,g?e.jsxDEV(A,{alignItems:"flex-end",spacing:2,py:1.5,children:[e.jsxDEV(pe,{fullWidth:!0,size:"small",label:"Video Title",placeholder:"Enter video title",name:"add_video",value:b.label,onChange:d=>S({...b,label:d.target.value})},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:255,columnNumber:17},void 0),e.jsxDEV(E,{variant:"contained",onClick:M,children:"Update"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:266,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:254,columnNumber:15},void 0):null]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:243,columnNumber:9},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:242,columnNumber:7},void 0),!D&&e.jsxDEV(le,{children:[e.jsxDEV(E,{variant:"outlined",type:"button",size:"small",color:"secondary",className:"mr-2",onClick:L,children:"Cancel"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:277,columnNumber:11},void 0),e.jsxDEV(E,{color:"primary",variant:"contained",size:"small",onClick:P,children:"Update Video"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:289,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:276,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:228,columnNumber:5},void 0)},dt=()=>{s.checkSettings(110005)===5||s.checkSettings(110005),s.checkSettings(110005);let j=s.getvalue("clientId"),y=s.getvalue("recrId");const[D,o]=a.useState([]),[w,T]=a.useState({Cameratagid:"",autoId:"",clientId:"",createdDate:"",label:"",recrId:"",recrName:""}),[c,L]=a.useState(!1),[v,p]=a.useState(""),[b,S]=a.useState({}),[g,h]=a.useState(!1),[V,u]=a.useState({pageIndex:0,pageSize:10}),[M,P]=a.useState(0),[d,n]=a.useState(""),[I,q]=a.useState([{desc:!0,id:"createdDate"}]),[k,J]=a.useState("myVideos"),N=a.useCallback(K.debounce(()=>{let t={recrId:k==="myVideos"?s.getvalue("recrId"):0,clientId:s.getvalue("clientId")};C(x.postWithData("admin","getVideoList",t).then(i=>{var m;let l=i.data.videoDetails;console.log(l,"Test..");for(let f=0;f<l.length;f++)((m=l[f].createdDate)==null?void 0:m.length)>19&&(l[f].createdDate=be.ServerEDTToSystem(l[f].createdDate.substring(0,19),"yyyy-MM-dd hh:mm:ss","MM/dd/yyyy hh:mm a"));o(i.data.videoDetails),P(i.data.videoDetails.length)}))},400),[k]);a.useEffect(()=>{N()},[N]);const O=K.debounce(N,300);a.useEffect(()=>{u(t=>({...t,pageIndex:0}))},[d]);const Q=()=>{T({Cameratagid:"",autoId:"",clientId:"",createdDate:"",label:"",recrId:"",recrName:""}),h(!0),L(!1)},X=t=>{h(!1),t&&N()};a.useEffect(()=>{!g&&O()},[]);const Y=(t,i)=>{ne(`Are you sure you want to delete ${i} video ?`,()=>{Z(t)})},Z=t=>{C(x.deleteById("admin",`deleteVideo/${t}`,j).then(i=>{i.data.Success?(r("Video has been deleted successfully.","success"),N()):r(i.data.Message?i.data.Message:"An error occured while deleting","error")}).catch(i=>{var l,m,f,$;r((m=(l=i.response)==null?void 0:l.data)!=null&&m.Message?($=(f=i.response)==null?void 0:f.data)==null?void 0:$.Message:"An error occured while deleting","error")}))},[U,z]=a.useState(!1),[B,W]=a.useState(""),ee=(t,i)=>{W(t),z(!0),p(i)},te=()=>{z(!1),W(""),p("")},ae=a.useMemo(()=>[{accessorKey:"label",header:"Name",enableColumnPinning:!0,size:150},{accessorKey:"recrName",header:"Owner",enableColumnPinning:!0,size:150},{accessorKey:"createdDate",header:"Created On",size:150},{accessorKey:"Actions",header:"Actions",enableSorting:!1,Cell:({row:t})=>{const l=t.original.recrId===y,m=t.original.cameratagId?t.original.cameratagId.startsWith("//")?`https:${t.original.cameratagId}`:t.original.cameratagId:null;return e.jsxDEV(A,{direction:"row",spacing:1,sx:{width:150},children:e.jsxDEV(A,{direction:"row",spacing:2,sx:{width:"100%",justifyContent:"space-between",alignItems:"center"},children:[m&&e.jsxDEV(_,{title:"Open Video",placement:"top",color:"primary",children:e.jsxDEV(F,{onClick:()=>ee(m,t.original.label),children:e.jsxDEV(ue,{},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:317,columnNumber:45},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:312,columnNumber:41},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:311,columnNumber:37},void 0),e.jsxDEV(A,{direction:"row",spacing:1,sx:{visibility:l?"visible":"hidden",width:"100%"},children:t.original.recrId===s.getvalue("recrId")&&e.jsxDEV(_,{title:"Delete",placement:"top",color:"primary",children:e.jsxDEV(F,{onClick:()=>Y(t.original.autoId,t.original.label),children:e.jsxDEV(ce,{},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:349,columnNumber:49},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:341,columnNumber:45},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:340,columnNumber:41},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:321,columnNumber:33},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:301,columnNumber:29},void 0)},t.original.autoId,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:295,columnNumber:25},void 0)},size:150}],[]),de=(t,i)=>{console.log(i),J(i),u(l=>({...l,pageIndex:0}))},R=t=>{x.saveAuditLog(t)};return a.useEffect(()=>{R(4296)},[]),e.jsxDEV("div",{className:"emailTemplateList pt-3 px-5",id:"sourceList",children:[e.jsxDEV(G,{container:!0,direction:"row",className:"customCard px-4 py-2",justifyContent:"space-between",alignItems:"center",display:"flex",sx:{minHeight:"auto !important"},children:[e.jsxDEV(re,{variant:"h6",className:"headerName",children:"Videos"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:392,columnNumber:17},void 0),e.jsxDEV(A,{direction:"row",className:"btn-container",children:e.jsxDEV(E,{variant:"contained",color:"primary",size:"small",onClick:Q,children:"Add Video"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:396,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:395,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:383,columnNumber:13},void 0),e.jsxDEV(G,{sx:{width:"calc(100%)"},children:e.jsxDEV(he,{value:k,onChange:de,className:"tableTabs","aria-label":"template tabs",children:[e.jsxDEV(H,{value:"myVideos",label:"My Videos",onClick:()=>R(4255)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:411,columnNumber:21},void 0),e.jsxDEV(H,{value:"allVideos",label:"All Videos",onClick:()=>R(4256)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:412,columnNumber:21},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:407,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:406,columnNumber:13},void 0),e.jsxDEV("div",{className:"MRTableCustom  pl-0 ",children:e.jsxDEV(fe,{columns:ae,data:D,state:{rowSelection:b,pagination:V,globalFilter:d},enablePinning:!0,enableStickyHeader:!0,initialState:{columnPinning:{left:["mrt-row-select","recrName"]},density:"compact",showGlobalFilter:!0},muiPaginationProps:{rowsPerPageOptions:[10],showFirstButton:!1,showLastButton:!1,SelectProps:{style:{display:"none"}}},enablePagination:!0,renderBottomToolbarCustomActions:()=>e.jsxDEV(ge,{page:V.pageIndex,rowsPerPage:10,rowCount:M,onChangePage:t=>u({...V,pageIndex:t,pageSize:10}),showCount:!1},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:444,columnNumber:25},void 0),onGlobalFilterChange:n,enableSorting:!0,onSortingChange:q,enableDensityToggle:!1,enableFullScreenToggle:!0,enableGlobalFilterModes:!0,columnResizeMode:"onChange",onPaginationChange:u,getRowId:t=>t.autoId,icons:{ArrowDownwardIcon:t=>e.jsxDEV(me,{...t},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:471,columnNumber:29},void 0)},rowCount:D.length},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:416,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:415,columnNumber:13},void 0),B&&U?e.jsxDEV(De,{url:B,open:U,closePopup:()=>te()},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:481,columnNumber:21},void 0):null,g?e.jsxDEV(Ne,{open:g,handleClose:X,videoData:w,add:!c,onVideoSaveSuccess:O},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:487,columnNumber:17},void 0):null]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:382,columnNumber:9},void 0)};export{dt as default};
