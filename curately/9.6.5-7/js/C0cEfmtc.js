import{q as de,v as fe,r as p,k as t,O as z,l as H,C as pe,T as Y,B as te,L as ye,W as be,A as ge,R as he,D as De,o as Ee}from"./DAuuuMsE.js";import{U as ae}from"./CX3ETe29.js";import{T as se}from"./BestnZaX.js";const ke=[{name:"English Writing",assessmentsId:"87344efd-e00a-4609-9e55-27eb8cbe3789",source:"emmersion",assessmentCode:"EMEREW",isChecked:!1},{name:"English Speaking",assessmentsId:"e1faeacb-ff91-4e4b-b3af-d1120508b6d8",source:"emmersion",assessmentCode:"EMERES",isChecked:!1},{name:"Spanish Speaking",assessmentsId:"dd7ada18-7327-4d7b-96fc-ccdf8a082af4",source:"emmersion",assessmentCode:"EMERSS",isChecked:!1},{name:"French Speaking",assessmentsId:"ae271fa1-d856-4093-820b-de9f9821360f",source:"emmersion",assessmentCode:"EMERFS",isChecked:!1},{name:"Mandarin Speaking",assessmentsId:"ff4ee469-7dc9-47e1-a61c-17be42403556",source:"emmersion",assessmentCode:"EMERMS",isChecked:!1},{name:"Spanish Writing",assessmentsId:"e74f05f2-0696-48f1-8520-1fec98cc3cef",source:"emmersion",assessmentCode:"EMERSW",isChecked:!1},{name:"German Speaking",assessmentsId:"3a62cd1a-8d8f-4a2c-9475-368bbc0f9b81",source:"emmersion",assessmentCode:"EMERGS",isChecked:!1},{name:"Portuguese Speaking",assessmentsId:"71931816-19b4-46a9-b58d-20e288dc3579",source:"emmersion",assessmentCode:"EMERPS",isChecked:!1},{name:"Italian Speaking",assessmentsId:"fb6bfec1-f449-490d-872c-727add76f629",source:"emmersion",assessmentCode:"EMERIT",isChecked:!1},{name:"Tagalog Speaking",assessmentsId:"52201723-5244-4baf-bb5d-f412f5fd5293",source:"emmersion",assessmentCode:"EMERTS",isChecked:!1},{name:"Japanese Speaking",assessmentsId:"538a04ce-46a9-4d34-a89b-1b19f8ff21b5",source:"emmersion",assessmentCode:"EMERJS",isChecked:!1}];var re={exports:{}},oe;function ve(){return oe||(oe=1,(()=>{var k={262:(r,l,u)=>{var g=u(586);function V(){}function D(){}D.resetWarningCache=V,r.exports=function(){function i(B,M,$,K,_,v){if(v!==g){var n=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw n.name="Invariant Violation",n}}function E(){return i}i.isRequired=i;var T={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:E,element:i,elementType:i,instanceOf:E,node:i,objectOf:E,oneOf:E,oneOfType:E,shape:E,exact:E,checkPropTypes:D,resetWarningCache:V};return T.PropTypes=T,T}},980:(r,l,u)=>{r.exports=u(262)()},586:r=>{r.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},x={};function d(r){var l=x[r];if(l!==void 0)return l.exports;var u=x[r]={exports:{}};return k[r](u,u.exports,d),u.exports}d.n=r=>{var l=r&&r.__esModule?()=>r.default:()=>r;return d.d(l,{a:l}),l},d.d=(r,l)=>{for(var u in l)d.o(l,u)&&!d.o(r,u)&&Object.defineProperty(r,u,{enumerable:!0,get:l[u]})},d.o=(r,l)=>Object.prototype.hasOwnProperty.call(r,l),d.r=r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})};var W={};(()=>{d.r(W),d.d(W,{default:()=>v});const r=de();var l=d.n(r),u=d(980),g=d.n(u),V=["iframeURL","onEvent","anvilURL","scroll","style","className"];function D(){return D=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var m in a)Object.prototype.hasOwnProperty.call(a,m)&&(n[m]=a[m])}return n},D.apply(this,arguments)}function i(n){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(n)}function E(n,e){for(var a=0;a<e.length;a++){var m=e[a];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(n,K(m.key),m)}}function T(n,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,m){return a.__proto__=m,a},T(n,e)}function B(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function M(n){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},M(n)}function $(n,e,a){return(e=K(e))in n?Object.defineProperty(n,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[e]=a,n}function K(n){var e=function(a,m){if(i(a)!=="object"||a===null)return a;var j=a[Symbol.toPrimitive];if(j!==void 0){var U=j.call(a,"string");if(i(U)!=="object")return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(n);return i(e)==="symbol"?e:String(e)}var _=function(n){(function(s,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(c&&c.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),c&&T(s,c)})(R,n);var e,a,m,j,U=(m=R,j=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var s,c=M(m);if(j){var y=M(this).constructor;s=Reflect.construct(c,arguments,y)}else s=c.apply(this,arguments);return function(w,b){if(b&&(i(b)==="object"||typeof b=="function"))return b;if(b!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B(w)}(this,s)});function R(s){var c;return function(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}(this,R),$(B(c=U.call(this,s)),"postMessage",function(y){c.iframeRef.current.contentWindow.postMessage(y,"*")}),$(B(c),"handleEvent",function(y){var w=y.origin,b=y.data,S=c.props,O=S.anvilURL,N=S.onEvent;O===w&&i(b)==="object"&&N(b)}),c.iframeRef=l().createRef(),c}return e=R,(a=[{key:"componentDidMount",value:function(){var s=this.props.scroll;s&&this.iframeRef.current.scrollIntoView({behavior:s}),window.addEventListener("message",this.handleEvent)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.handleEvent)}},{key:"render",value:function(){var s=this.props,c=s.iframeURL,y=(s.onEvent,s.anvilURL,s.scroll,s.style),w=s.className,b=function(S,O){if(S==null)return{};var N,L,F=function(G,ee){if(G==null)return{};var P,A,Q={},X=Object.keys(G);for(A=0;A<X.length;A++)P=X[A],ee.indexOf(P)>=0||(Q[P]=G[P]);return Q}(S,O);if(Object.getOwnPropertySymbols){var J=Object.getOwnPropertySymbols(S);for(L=0;L<J.length;L++)N=J[L],O.indexOf(N)>=0||Object.prototype.propertyIsEnumerable.call(S,N)&&(F[N]=S[N])}return F}(s,V);return l().createElement("iframe",D({id:"anvil-embed-frame",name:"AnvilEmbedFrame",className:w},b,{src:c,ref:this.iframeRef,style:y}),l().createElement("p",{id:"anvil-iframe-warning"},"Your browser does not support iframes."))}}])&&E(e.prototype,a),Object.defineProperty(e,"prototype",{writable:!1}),R}(l().Component);_.defaultProps={onEvent:function(){},anvilURL:"https://app.useanvil.com"},_.propTypes={iframeURL:g().string.isRequired,onLoad:g().func,onEvent:g().func,anvilURL:g().string,scroll:g().oneOf(["auto","smooth"]),style:g().object,className:g().string};const v=_})(),re.exports=W})()),re.exports}var Se=ve();const Ne=fe(Se),xe=({onClose:k,documentId:x,handleRefresh:d,formData:W,documentName:r,stageId:l})=>{const u=p.useRef(),[g,V]=p.useState(""),[D,i]=p.useState(x),[E,T]=p.useState(""),[B,M]=p.useState(!1),[$,K]=p.useState(!1),[_,v]=p.useState(!1),[n,e]=p.useState(!1),[a,m]=p.useState([]),[j,U]=p.useState({hrName:"",hrEmail:"",recruiterName:"",recruiterEmail:""}),[R,s]=p.useState(""),[c,y]=p.useState(""),[w,b]=p.useState(""),[S,O]=p.useState(""),{hrName:N,hrEmail:L,recruiterEmail:F,recruiterName:J}=j;p.useEffect(()=>{D&&(async()=>{try{v(!0);const h=await(await fetch(ae+"/editTemplate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({castId:D,fieldData:W})})).json(),{url:C}=h.data.data.generateEmbedURL;let I=C+"&withinIframe=true";V(I),v(!1)}catch{v(!1)}})()},[D]);const G=async()=>{u.current.iframeRef.current.contentWindow.postMessage({action:"castEditSubmit"},"*")},ee=async()=>{try{v(!0);const f=await(await fetch(ae+"/getTemplate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eid:x})})).json();if(f.data.data){let C=f.data.data.data.config.fields.filter(I=>I.type==="signature");if(C.length){let I=C.filter(q=>q.aliasId==="recruiterSignature"||q.aliasId==="hrSignature");if(I.length){e(!0);let q=[];I.forEach(Z=>{q.push({name:Z.aliasId==="recruiterSignature"?"recruiterName":"hrName",email:Z.aliasId==="recruiterSignature"?"recruiterEmail":"hrEmail"})});const le=q.filter((Z,ce,ue)=>ue.findIndex(me=>me.name===Z.name)===ce);m(le)}else k()}else k();v(!1)}}catch{v(!1)}};let P=!1;p.useEffect(()=>{window.addEventListener("message",async({origin:o,data:f})=>{P||f&&typeof f=="object"&&(f.action==="signerLoad"||(f.action==="castEdit"?(ee(),P=!0):f.action))})},[]);const A=()=>{d(),k()},Q=()=>{let o=!0;return a.findIndex(h=>h.name==="hrName")===-1&&(o=!1),o},X=()=>{let o=!0;return a.findIndex(h=>h.name==="recruiterName")===-1&&(o=!1),o},ie=async()=>{let o=Q(),f=X(),h=!1,C=!1;if(o&&(L?L.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)?(s(""),console.log("isCOmm"),h=!1):(s("please enter a valid email."),h=!0):(s("This filed is required."),h=!0),["",null,void 0].includes(N)?b("This field is required."):b("")),f&&(F?F.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)?(y(""),C=!1):(y("please enter a valid email."),C=!0):(y("This filed is required."),C=!0),["",null,void 0].includes(J)?O("This field is required."):O("")),h||C)return!1;console.log(R,"hrEmailError");let I={clientId:ye.getvalue("clientId"),jobId:l,templateId:x,documentName:r,additionalSignature:JSON.stringify(j)};be(ge.getByParams(193,"Curately/Workflow/workflow_documentsigning_save.jsp",I).then(q=>{k()}))},ne=o=>{switch(U({...j,[o.target.name]:o.target.value}),o.target.name){case"recruiterName":O("");break;case"hrName":b("");break}};return t.jsxDEV(z,{container:!0,children:[t.jsxDEV(z,{md:12,lg:12,size:12,children:t.jsxDEV(H,{sx:{width:"100%",height:"75vh",display:"flex",justifyContent:"center",alignItems:"center"},children:_?t.jsxDEV(pe,{},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/Stages/DocumentSigning/CreateTemplate.jsx",lineNumber:278,columnNumber:31},void 0):n?t.jsxDEV(z,{container:!0,children:[t.jsxDEV(z,{size:4},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/Stages/DocumentSigning/CreateTemplate.jsx",lineNumber:293,columnNumber:25},void 0),t.jsxDEV(z,{size:4,children:[t.jsxDEV(Y,{component:"h4",sx:{fontWeight:"500",mb:2,fontSize:"18px"},children:"Add Emails"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/Stages/DocumentSigning/CreateTemplate.jsx",lineNumber:297,columnNumber:29},void 0),a.length&&a.map(o=>t.jsxDEV(t.Fragment,{children:[t.jsxDEV(H,{sx:{mb:1},children:[t.jsxDEV(Y,{sx:{fontWeight:"500"},children:o.name==="recruiterName"?"Recruiter Name:":"HR Name:"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/Stages/DocumentSigning/CreateTemplate.jsx",lineNumber:302,columnNumber:45},void 0),t.jsxDEV(se,{size:"small",sx:{width:"100%"},value:o.name==="recruiterName"?J:N,name:o.name,onChange:ne},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/Stages/DocumentSigning/CreateTemplate.jsx",lineNumber:303,columnNumber:45},void 0),t.jsxDEV(H,{sx:{pt:1},children:t.jsxDEV(Y,{sx:{color:"red",fontSize:"12px"},children:o.name==="recruiterName"?S:w},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/Stages/DocumentSigning/CreateTemplate.jsx",lineNumber:305,columnNumber:49},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/Stages/DocumentSigning/CreateTemplate.jsx",lineNumber:304,columnNumber:45},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/Stages/DocumentSigning/CreateTemplate.jsx",lineNumber:301,columnNumber:41},void 0),t.jsxDEV(H,{sx:{mb:1},children:[t.jsxDEV(Y,{sx:{fontWeight:"500"},children:o.email==="recruiterEmail"?"Recruiter Email:":"HR Email:"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/Stages/DocumentSigning/CreateTemplate.jsx",lineNumber:309,columnNumber:45},void 0),t.jsxDEV(se,{size:"small",sx:{width:"100%"},value:o.email==="recruiterEmail"?F:L,name:o.email,onChange:f=>{ne(f),o.email==="recruiterEmail"?y(""):s("")}},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/Stages/DocumentSigning/CreateTemplate.jsx",lineNumber:310,columnNumber:45},void 0),t.jsxDEV(H,{sx:{pt:1},children:t.jsxDEV(Y,{sx:{color:"red",fontSize:"12px"},children:o.email==="recruiterEmail"?c:R},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/Stages/DocumentSigning/CreateTemplate.jsx",lineNumber:320,columnNumber:49},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/Stages/DocumentSigning/CreateTemplate.jsx",lineNumber:319,columnNumber:45},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/Stages/DocumentSigning/CreateTemplate.jsx",lineNumber:308,columnNumber:41},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/Stages/DocumentSigning/CreateTemplate.jsx",lineNumber:300,columnNumber:37},void 0))]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/Stages/DocumentSigning/CreateTemplate.jsx",lineNumber:296,columnNumber:25},void 0),t.jsxDEV(z,{size:4},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/Stages/DocumentSigning/CreateTemplate.jsx",lineNumber:329,columnNumber:25},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/Stages/DocumentSigning/CreateTemplate.jsx",lineNumber:291,columnNumber:26},void 0):t.jsxDEV(Ne,{ref:u,iframeURL:g,onEvent:o=>{d()},style:{width:"100%",height:"100%",border:"none"},className:"anvil-embed-frame","data-anvil-embed":!0},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/Stages/DocumentSigning/CreateTemplate.jsx",lineNumber:278,columnNumber:69},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/Stages/DocumentSigning/CreateTemplate.jsx",lineNumber:277,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/Stages/DocumentSigning/CreateTemplate.jsx",lineNumber:276,columnNumber:13},void 0),t.jsxDEV(H,{sx:{display:"flex",justifyContent:"flex-end",mt:1,width:"100%"},children:[t.jsxDEV(te,{type:"button",onClick:A,sx:{textTransform:"none",mr:1},children:"Cancel"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/Stages/DocumentSigning/CreateTemplate.jsx",lineNumber:342,columnNumber:17},void 0),n?t.jsxDEV(te,{type:"button",onClick:ie,variant:"contained",children:"Submit"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/Stages/DocumentSigning/CreateTemplate.jsx",lineNumber:343,columnNumber:112},void 0):t.jsxDEV(te,{type:"button",onClick:G,variant:"contained",children:"Save"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/Stages/DocumentSigning/CreateTemplate.jsx",lineNumber:343,columnNumber:33},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/Stages/DocumentSigning/CreateTemplate.jsx",lineNumber:341,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/Stages/DocumentSigning/CreateTemplate.jsx",lineNumber:274,columnNumber:9},void 0)},Te=({open:k,onClose:x,documentId:d,handleRefresh:W,formData:r,documentName:l,stageId:u})=>t.jsxDEV(he.Fragment,{children:t.jsxDEV(De,{open:k,onClose:x,className:"main-dialog",children:t.jsxDEV(Ee,{sx:{overflow:"hidden"},children:t.jsxDEV(xe,{onClose:x,documentId:d,handleRefresh:W,formData:r,documentName:l,stageId:u},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/DocumentModal/DocumentModal.tsx",lineNumber:26,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/DocumentModal/DocumentModal.tsx",lineNumber:24,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/DocumentModal/DocumentModal.tsx",lineNumber:22,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/DocumentModal/DocumentModal.tsx",lineNumber:21,columnNumber:9},void 0);export{Te as D,ke as m};
