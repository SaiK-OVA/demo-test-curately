import{L as d,r as c,W as g,A as m,k as e,D as te,I as F,n as re,o as se,S as C,U as oe,B as L,V as n,O as P,T as ae,b1 as ce}from"./DAuuuMsE.js";import{E as ue}from"./BZPAOVTJ.js";import{D as ne}from"./DOjwGLM0.js";import{S as le}from"./68QKccnG.js";import{M as ie}from"./Ez4yizbq.js";import{u as de}from"./D1ftmOk2.js";import{c as me,a as x}from"./DwmmMyHW.js";import{E as B}from"./BayHs3N0.js";import{l as k}from"./Cg41riQw.js";import{D as Se}from"./Br0xRRVu.js";import{T as R,I as fe}from"./BestnZaX.js";import{F as ye,S as pe}from"./w5-nO31Y.js";import{M as be}from"./OPHguh9D.js";import{L as De}from"./QwUMPYgi.js";import{C as Ne}from"./B7IUApoB.js";import{T as W}from"./DbsmdDnd.js";import"./DistCVVm.js";import"./BqtMM88J.js";import"./ZuCM0PYB.js";import"./CGk11wqi.js";import"./D2Y9uqkR.js";import"./DVyrZ3Lu.js";import"./DPDHQPP4.js";import"./zQ0bN4E_.js";import"./CDmetmmn.js";import"./C4JXEfII.js";import"./Dsukr_f2.js";import"./1Bak8biM.js";import"./B7U4EVWr.js";import"./C_IKUwSv.js";import"./JyAhcbJl.js";import"./DA-mmMmo.js";import"./XBS2c42B.js";import"./IOI02mfF.js";const ge=({open:A,handleClose:y,add:p,sourceData:u})=>{let V=d.getvalue("clientId");const[v,b]=c.useState(!1),[I,E]=c.useState([]),j=u?{sourceId:u?u.sourceId:"",sourceName:u?u.sourceName:"",description:u?u.description:"",sourceTypeId:u?u.sourceTypeId.toString():"",clientId:d.getvalue("clientId")}:{sourceName:"",description:"",sourceTypeId:"",sourceId:"",clientId:d.getvalue("clientId")},z=me().shape({sourceName:x().matches(/^[a-zA-Z0-9-_@() ]+$/,"Source name can only contain letters, numbers, and spaces").required("Source name is required"),description:x(),sourceTypeId:x().required("Source Type is required"),sourceId:x(),clientId:x()}),r=de({initialValues:j,validationSchema:z,onSubmit:()=>{b(!0)},validateOnMount:!0}),h=()=>{if(r.values.sourceName.trim()==="")return n("Please Enter Source name","error"),!1;if(r.values.sourceTypeId.trim()==="")return n("Please select 'Source Type","error"),!1;b(!0),r.isValid?g(m.postWithData("admin","saveSource",{...r.values}).then(s=>{s.data.Success?(n("Source has been saved successfully.","success"),r.resetForm(),y(!0)):n(s.data.Message?s.data.Message:"An error occured","error")})):n("Please fill all fields.","error")},S=()=>{if(r.values.sourceName.trim()==="")return n("Please Enter Source name","error"),!1;if(r.values.sourceTypeId==="")return n("Please select 'Source Type","error"),!1;b(!0),r.isValid?g(m.postWithData("admin","updateSource",{...r.values}).then(s=>{var i;(i=s==null?void 0:s.data)!=null&&i.Success?(n("Source has been updated successfully.","success"),r.resetForm(),y(!0)):n(s.data.Message?s.data.Message:"An error occured","error")})):n("Please fill all fields.","error")},D=()=>{y(!1),r.resetForm()},$=c.useCallback(k.debounce(()=>{g(m.getCall("admin",`getSourceTypeList/${V}`).then(s=>{E(s.data.list)}))},600),[]);c.useEffect(()=>{$()},[]);const T=s=>{m.saveAuditLog(s)};return e.jsxDEV(te,{open:A,onClose:y,maxWidth:"sm",fullWidth:!0,children:[e.jsxDEV(Se,{children:[p?"Add New":"Update"," Sources"]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:183,columnNumber:13},void 0),e.jsxDEV(F,{"aria-label":"close",onClick:D,sx:{position:"absolute",right:8,top:8,color:s=>s.palette.grey[500]},children:e.jsxDEV(re,{},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:194,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:184,columnNumber:13},void 0),e.jsxDEV(se,{children:e.jsxDEV("form",{onSubmit:r.handleSubmit,children:e.jsxDEV(C,{spacing:1,className:"mt-1",children:[e.jsxDEV(R,{autoFocus:!0,id:"sourceName",name:"sourceName",label:"Source Name",size:"small",type:"text",fullWidth:!0,variant:"outlined",value:r.values.sourceName,onChange:r.handleChange},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:200,columnNumber:25},void 0),e.jsxDEV(B,{formikObj:r,name:"sourceName",isFormSubmitted:v},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:219,columnNumber:25},void 0),e.jsxDEV(ye,{size:"small",children:[e.jsxDEV(fe,{id:"type-label",children:"Type "},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:223,columnNumber:29},void 0),e.jsxDEV(pe,{labelId:"type-label",id:"type-select",name:"sourceTypeId",label:"sourceTypeId",value:r.values.sourceTypeId?r.values.sourceTypeId:"",onChange:r.handleChange,children:I&&I.map((s,i)=>e.jsxDEV(be,{value:`${s.sourceTypeId}`,children:s.sourceType},i,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:234,columnNumber:45},void 0))},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:224,columnNumber:29},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:222,columnNumber:25},void 0),e.jsxDEV(B,{formikObj:r,name:"sourceTypeId",isFormSubmitted:v},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:241,columnNumber:25},void 0),e.jsxDEV(R,{id:"options",label:"Description",placeholder:"Brief Description",multiline:!0,rows:4,fullWidth:!0,variant:"outlined",value:r.values.description,onChange:s=>{const i=s.target.value;r.setFieldValue("description",i)}},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:242,columnNumber:25},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:199,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:198,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:196,columnNumber:13},void 0),e.jsxDEV(oe,{children:[e.jsxDEV(L,{variant:"outlined",type:"button",size:"small",color:"secondary",className:"mr-2",onClick:D,children:"Cancel"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:263,columnNumber:17},void 0),e.jsxDEV(L,{color:"primary",variant:"contained",size:"small",onClick:()=>{(u&&u.sourceId?S:h)(),T(4235)},children:[p?"Add":"Update"," Sources"]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:271,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:262,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:182,columnNumber:9},void 0)},tt=()=>{const A=d.checkSettings(110005)===5||d.checkSettings(110005)===6,y=d.checkSettings(110005)===6;let p=d.getvalue("clientId");const[u,V]=c.useState([]),[v,b]=c.useState({sourceId:"",sourceName:"",description:"",sourceTypeId:"",clientId:""}),[I,E]=c.useState(!1),[j,z]=c.useState({}),[r,h]=c.useState(!1),[S,D]=c.useState({pageIndex:0,pageSize:10}),[$,T]=c.useState(0),[s,i]=c.useState(""),[w,U]=c.useState([]),[G,q]=c.useState([{desc:!0,id:"createdDate"}]),K=t=>new Promise((o,l)=>{g(m.getCall("admin",`getSourceListbyId/${t}/${p}`).then(a=>{if(a.data&&a.data.sourceid){const f=a.data;b({sourceId:f.sourceid,sourceName:f.sourcename,description:f.description,sourceTypeId:f.sourcetypeid,clientId:d.getvalue("clientId")})}E(!0),o(a)}).catch(a=>{console.error("Error fetching User details:",a),l(a)}))});c.useEffect(()=>{const t=u.filter(o=>{var a;const l=s||"";return(a=o.sourceName)==null?void 0:a.toLowerCase().includes(l.toLowerCase())});U(t),D(o=>({...o,pageIndex:0}))},[s,u]);const H=t=>{K(t).then(()=>{h(!0),N(4236)}).catch(o=>{n("Unable to fetch User Data",o)})},Z=()=>{b({sourceId:"",sourceName:"",description:"",sourceTypeId:"",clientId:""}),h(!0),E(!1)},_=t=>{h(!1),t&&M()},M=c.useCallback(k.debounce(()=>{g(m.getCall("admin",`getSourceList/${p}`).then(t=>{var l;let o=t.data.list;for(let a=0;a<o.length;a++)((l=o[a].createdDate)==null?void 0:l.length)>19&&(o[a].createdDate=De.ServerEDTToSystem(o[a].createdDate.substring(0,19),"yyyy-MM-dd hh:mm:ss","MM/dd/yyyy hh:mm a"));V(t.data.list),T(t.data.list.length)}))},400),[]),J=k.debounce(M,300);c.useEffect(()=>{!r&&J()},[]);const Q=(t,o)=>{ce(`Are you sure you want to delete ${o} Source ?`,()=>{X(t),N(4237)})},X=t=>{g(m.getCall("admin",`deleteSource/${t}/${p}`).then(o=>{o.data.Success?(n("Source has been deleted successfully.","success"),M()):n(o.data.Message?o.data.Message:"An error occured while deleting","error")}).catch(o=>{var l,a,f,O;n((a=(l=o.response)==null?void 0:l.data)!=null&&a.Message?(O=(f=o.response)==null?void 0:f.data)==null?void 0:O.Message:"An error occured while deleting","error")}))},Y=c.useMemo(()=>[{accessorKey:"sourceName",header:"Name",enableColumnPinning:!0,size:350},{accessorKey:"sourceType",header:"Type",size:350},{accessorKey:"createdDate",header:"Created On",size:300},{accessorKey:"Actions",header:"Actions",enableSorting:!1,Cell:({row:t})=>e.jsxDEV(C,{children:e.jsxDEV(C,{direction:"row",children:[A?e.jsxDEV(W,{title:"Edit",placement:"top",color:"primary",children:e.jsxDEV(F,{onClick:()=>{H(t.original.sourceId)},children:e.jsxDEV(ue,{},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:272,columnNumber:23},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:271,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:270,columnNumber:19},void 0):null,y?e.jsxDEV(W,{title:"Delete",placement:"top",color:"primary",children:e.jsxDEV(F,{onClick:()=>{Q(t.original.sourceId,t.original.sourceName)},children:e.jsxDEV(ne,{},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:282,columnNumber:23},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:281,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:280,columnNumber:19},void 0):null]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:267,columnNumber:13},void 0)},t.original.sourceId,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:266,columnNumber:11},void 0),size:350}],[]),N=t=>{m.saveAuditLog(t)};c.useEffect(()=>{N(4233)},[]);const ee=t=>{t>S.pageIndex?N(4238):t<S.pageIndex&&N(4239)};return e.jsxDEV("div",{className:"emailTemplateList pt-3 px-5",id:"sourceList",children:[e.jsxDEV(P,{container:!0,direction:"row",className:"customCard px-4 py-2",justifyContent:"space-between",alignItems:"center",display:"flex",sx:{minHeight:"auto !important"},children:[e.jsxDEV(ae,{variant:"h6",className:"headerName",children:"Sources"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:325,columnNumber:9},void 0),e.jsxDEV(C,{direction:"row",className:"btn-container",children:e.jsxDEV(L,{variant:"contained",color:"primary",size:"small",onClick:()=>{N(4234),Z()},children:"New Sources"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:329,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:328,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:316,columnNumber:7},void 0),e.jsxDEV(P,{container:!0,className:"customCard p-0 filterExpand-grid",children:[e.jsxDEV(P,{sx:{width:"calc(100%)"},children:e.jsxDEV("div",{className:"MRTableCustom  pl-0 ",children:e.jsxDEV(ie,{columns:Y,data:w,state:{rowSelection:j,pagination:S,sorting:G,globalFilter:s},enablePinning:!0,enableStickyHeader:!0,initialState:{columnPinning:{left:["mrt-row-select","sourceName"]},density:"compact",showGlobalFilter:!0},muiPaginationProps:{rowsPerPageOptions:[10],showFirstButton:!1,showLastButton:!1,SelectProps:{style:{display:"none"}}},enablePagination:!0,renderBottomToolbarCustomActions:()=>e.jsxDEV(Ne,{page:S.pageIndex,rowsPerPage:10,rowCount:w.length,onChangePage:t=>{D({...S,pageIndex:t,pageSize:10}),ee(t)},showCount:!0},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:362,columnNumber:17},void 0),onGlobalFilterChange:i,enableSorting:!0,onSortingChange:q,enableDensityToggle:!1,enableFullScreenToggle:!0,enableFilters:!1,enableGlobalFilterModes:!0,columnResizeMode:"onChange",onPaginationChange:D,getRowId:t=>t.sourceId,icons:{ArrowDownwardIcon:t=>e.jsxDEV(le,{...t},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:384,columnNumber:61},void 0)},rowCount:w.length},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:335,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:334,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:333,columnNumber:9},void 0),r?e.jsxDEV(ge,{open:r,handleClose:_,sourceData:v,add:!I},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:393,columnNumber:13},void 0):null]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:332,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:315,columnNumber:5},void 0)};export{tt as default};
