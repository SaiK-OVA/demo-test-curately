import{r as d,L as f,W as E,A as V,V as v,k as e,D as oe,O as r,B as w,o as ne,l as ie,I as W,n as ce,S as K,T as ue,b1 as de}from"./DAuuuMsE.js";import{u as me}from"./D1ftmOk2.js";import{c as H,f as $,a as b}from"./DwmmMyHW.js";import{E as x}from"./BayHs3N0.js";import{A as fe}from"./DKIh428S.js";import{M as Q}from"./7FOaSWX5.js";import{D as ye}from"./Br0xRRVu.js";import{D as Ne}from"./C_IKUwSv.js";import{T as h}from"./BestnZaX.js";import{M as u}from"./OPHguh9D.js";import{C as be}from"./Doaqw506.js";import{l as J}from"./Cg41riQw.js";import{M as De}from"./Ez4yizbq.js";import{L as he}from"./QwUMPYgi.js";import{E as pe}from"./BZPAOVTJ.js";import{D as ge}from"./DOjwGLM0.js";import{C as Ge}from"./B7IUApoB.js";import{S as xe}from"./68QKccnG.js";import{T as _}from"./DbsmdDnd.js";import"./w5-nO31Y.js";import"./rYcqsWUw.js";import"./Bgs2xNBT.js";import"./DA-mmMmo.js";import"./DistCVVm.js";import"./XBS2c42B.js";import"./IOI02mfF.js";import"./BqtMM88J.js";import"./ZuCM0PYB.js";import"./CGk11wqi.js";import"./D2Y9uqkR.js";import"./DVyrZ3Lu.js";import"./DPDHQPP4.js";import"./zQ0bN4E_.js";import"./CDmetmmn.js";import"./C4JXEfII.js";import"./Dsukr_f2.js";import"./1Bak8biM.js";import"./B7U4EVWr.js";import"./JyAhcbJl.js";const ve=({open:k,handleClose:j,add:p,goalData:n,goalsMetricsList:z})=>{var T,M;const P=()=>{let l=[...t.values.goalAlerts];l.push({alertType:"",alertFrequency:"",alertNotificationReceipt:"",alertSpecificUsers:[],alertSpecificUsersName:[]}),t.setFieldValue("goalAlerts",l)},L=l=>{const o=[...t.values.goalAlerts].filter((i,y)=>y!==l);t.setFieldValue("goalAlerts",o)},[D,g]=d.useState(!1),I=l=>{var a;if((a=n==null?void 0:n.goalAssignees)!=null&&a.length){const o=n.goalAssignees.reduce((i,y,F)=>(i.recrId+=`${F===0?"":","}${y.recrId}`,i.recrName+=`${F===0?"":","}${y.recrName}`,i),{recrId:"",recrName:""});return l==="RECRID"?o.recrId:o.recrName}else return""},U=(l,a)=>{if(a!=null&&a.length){const o=a.reduce((i,y)=>(i.recrId.push(`${y.recrId}`),i.recrName.push(`${y.recrName}`),i),{recrId:[],recrName:[]});return l==="RECRID"?o.recrId:o.recrName}else return[]},O=n?{goalId:n.goalId||"",goalName:n.goalName||"",assignTo:I("RECRID"),timeFrame:n.timeFrame||"",metric:n.metric||"",metricId:n.metricId||"",targetType:n.targetType||"",targetValue:n.targetValue||"",assignRecruiterName:I("RECRNAME"),clientId:f.getvalue("clientId"),recrId:f.getvalue("recrId"),goalAlerts:(T=n==null?void 0:n.goalAlerts)!=null&&T.length?(M=n.goalAlerts)==null?void 0:M.map(l=>({alertType:l.alertType||"",alertFrequency:l.alertFrequency||"",alertNotificationReceipt:l.alertNotificationReceipt||"",alertSpecificUsers:U("RECRID",l.specificUsers),alertSpecificUsersName:U("RECRNAME",l.specificUsers)})):[{alertType:"",alertFrequency:"",alertNotificationReceipt:"",alertSpecificUsers:[],alertSpecificUsersName:[]}]}:{goalId:"",goalName:"",assignTo:"",timeFrame:"",metric:"",metricId:"",targetType:"",targetValue:"",assignRecruiterName:"",goalAlerts:[{alertType:"",alertFrequency:"",alertNotificationReceipt:"",alertSpecificUsers:"",alertSpecificUsersName:[]}],clientId:f.getvalue("clientId"),recrId:f.getvalue("recrId")},S=H().shape({goalName:b(),assignTo:b(),timeFrame:b(),metric:b(),metricId:b(),targetType:b(),targetValue:b(),goalAlerts:$().of(H().shape({alertType:b(),alertFrequency:b(),alertNotificationReceipt:b(),alertSpecificUsers:$(),alertSpecificUsersName:$()}))}),t=me({initialValues:O,validationSchema:S,onSubmit:()=>{G()}}),G=()=>{n.goalId?(g(!0),C(n.goalId)):(g(!0),C())},A=(l,a,o)=>{let i=[...t.values.goalAlerts];a&&o&&(i[l][a]=o,t.setFieldValue("goalAlerts",i))},C=l=>{if(g(!0),t.isValid){let a={clientId:f.getvalue("clientId"),recrId:f.getvalue("recrId"),goalName:t.values.goalName,assignTo:t.values.assignTo.split(","),timeFrame:t.values.timeFrame,metric:t.values.metric,targetType:t.values.targetType,targetValue:t.values.targetValue,goalAlerts:t.values.goalAlerts.map(({alertSpecificUsersName:o,...i})=>({...i})),metricId:Number(t.values.metricId)};l&&(a={...a,goalId:l}),E(V.postWithData("admin","saveOrUpdateGoal",a).then(o=>{o.data.Success?(v(`Goal has been ${l?"updated":"saved"} successfully.`,"success"),t.resetForm(),j(!0)):v(o.data.Message?o.data.Message:"An error occured","error")}))}else v("Please fill all fields.","error")};return e.jsxDEV("div",{children:e.jsxDEV(oe,{maxWidth:"md",fullWidth:!0,open:k,className:"AddUserModal",id:"AddGoal",children:[e.jsxDEV(ye,{className:"py-2",children:e.jsxDEV(r,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxDEV("span",{className:"addHeader",children:[p?"Add":"Edit"," Goal"]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:252,columnNumber:25},void 0),e.jsxDEV("div",{children:e.jsxDEV(r,{container:!0,direction:"row",justifyContent:"end",alignItems:"center",children:[e.jsxDEV(w,{variant:"outlined",type:"button",color:"secondary",className:"mr-2",onClick:()=>j(!1),children:"Cancel"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:262,columnNumber:33},void 0),e.jsxDEV(w,{variant:"contained",type:"button",color:"primary",onClick:G,children:p?"Save":"Update"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:268,columnNumber:33},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:256,columnNumber:29},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:255,columnNumber:25},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:246,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:245,columnNumber:17},void 0),e.jsxDEV(Ne,{},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:280,columnNumber:17},void 0),e.jsxDEV(ne,{children:e.jsxDEV("div",{children:e.jsxDEV("form",{onSubmit:t.handleSubmit,children:[e.jsxDEV(r,{container:!0,className:"mb-0",children:e.jsxDEV(r,{size:12,className:"mt-0",children:[e.jsxDEV("label",{className:"inputLabel",children:"Goal Name"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:286,columnNumber:37},void 0),e.jsxDEV(h,{fullWidth:!0,className:"mt-1",id:"goalName",name:"goalName",variant:"outlined",type:"text",size:"small",value:t.values.goalName,onChange:t.handleChange},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:287,columnNumber:37},void 0),e.jsxDEV(x,{formikObj:t,name:"goalName",isFormSubmitted:D},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:296,columnNumber:37},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:285,columnNumber:33},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:284,columnNumber:29},void 0),e.jsxDEV(r,{container:!0,className:"mb-0",direction:"row",justifyContent:"start",alignItems:"flex-start",children:[e.jsxDEV(r,{size:6,className:"pr-2",children:[e.jsxDEV("label",{className:"inputLabel",children:"Assign To"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:301,columnNumber:37},void 0),e.jsxDEV(Q,{id:"recruiter",handleChange:(l,a)=>{t.setValues({...t.values,assignRecruiterName:a,assignTo:l})},valuePassed:t.values.assignTo?{label:t.values.assignRecruiterName,id:t.values.assignTo}:{},isMultiple:!0,width:"100%",type:"id",placeholder:""},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:302,columnNumber:37},void 0),e.jsxDEV(x,{formikObj:t,name:"assignTo",isFormSubmitted:D},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:318,columnNumber:37},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:300,columnNumber:33},void 0),e.jsxDEV(r,{size:6,className:"pr-2 mt-1",children:[e.jsxDEV(ie,{display:"flex",alignItems:"center",children:e.jsxDEV("label",{className:"inputLabel",children:"Time Frame"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:323,columnNumber:41},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:322,columnNumber:37},void 0),e.jsxDEV(h,{fullWidth:!0,id:"timeFrame",name:"timeFrame",variant:"outlined",type:"text",size:"small",select:!0,value:t.values.timeFrame,onChange:t.handleChange,children:[e.jsxDEV(u,{value:"0"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:342,columnNumber:41},void 0),e.jsxDEV(u,{value:"Weekly",children:"Weekly"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:343,columnNumber:41},void 0),e.jsxDEV(u,{value:"Monthly",children:"Monthly"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:344,columnNumber:41},void 0),e.jsxDEV(u,{value:"Quarterly",children:"Quarterly"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:345,columnNumber:41},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:331,columnNumber:37},void 0),e.jsxDEV(x,{formikObj:t,name:"timeFrame",isFormSubmitted:D},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:347,columnNumber:37},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:321,columnNumber:33},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:299,columnNumber:29},void 0),e.jsxDEV(r,{container:!0,className:"mb-0",children:e.jsxDEV(r,{size:12,className:"mt-0",children:[e.jsxDEV("label",{className:"inputLabel",children:"Metric"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:352,columnNumber:37},void 0),e.jsxDEV(h,{fullWidth:!0,className:"mt-0",id:"metric",name:"metric",variant:"outlined",type:"text",size:"small",select:!0,value:t.values.metric,onChange:l=>{const a=l.target.value,o=z.find(i=>i.metric===a);t.setFieldValue("metric",a),t.setFieldValue("metricId",o?o.metricId:"")},children:z.map(l=>e.jsxDEV(u,{value:l.metric,children:l.metric},l.metricId,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:372,columnNumber:45},void 0))},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:353,columnNumber:37},void 0),e.jsxDEV(x,{formikObj:t,name:"metric",isFormSubmitted:D},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:377,columnNumber:37},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:351,columnNumber:33},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:350,columnNumber:29},void 0),e.jsxDEV(r,{container:!0,className:"mt-0 mb-0",direction:"row",spacing:1,justifyContent:"start",alignItems:"flex-start",children:[e.jsxDEV(r,{size:3,className:"mt-1",children:e.jsxDEV(r,{container:!0,direction:"row",justifyContent:"start",alignItems:"center",children:e.jsxDEV("label",{className:"inputLabel mt-3",children:"    Target Value   "},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:383,columnNumber:41},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:382,columnNumber:37},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:381,columnNumber:33},void 0),e.jsxDEV(r,{size:4,className:"mt-1",children:e.jsxDEV(r,{container:!0,direction:"row",justifyContent:"start",alignItems:"center",children:[e.jsxDEV(h,{size:"small",fullWidth:!0,id:"targetType",name:"targetType",select:!0,className:"selectLabel",value:t.values.targetType,onChange:t.handleChange,children:[e.jsxDEV(u,{value:"0"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:400,columnNumber:45},void 0),e.jsxDEV(u,{value:"Equal To",children:"Equal To"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:401,columnNumber:45},void 0),e.jsxDEV(u,{value:"Greater Than",children:"Greater Than"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:402,columnNumber:45},void 0),e.jsxDEV(u,{value:"Less Than",children:"Less Than"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:403,columnNumber:45},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:388,columnNumber:41},void 0),e.jsxDEV(x,{formikObj:t,name:"targetType",isFormSubmitted:D},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:405,columnNumber:41},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:387,columnNumber:37},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:386,columnNumber:33},void 0),e.jsxDEV(r,{size:5,className:"mt-1",children:e.jsxDEV(r,{container:!0,direction:"row",justifyContent:"start",alignItems:"center",children:[e.jsxDEV(h,{size:"small",fullWidth:!0,id:"targetValue",name:"targetValue",sx:{maxWidth:"250px"},value:t.values.targetValue,onChange:t.handleChange},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:410,columnNumber:41},void 0),e.jsxDEV(x,{formikObj:t,name:"targetValue",isFormSubmitted:D},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:419,columnNumber:41},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:409,columnNumber:37},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:408,columnNumber:33},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:380,columnNumber:29},void 0),t.values.goalAlerts.map((l,a)=>e.jsxDEV("div",{className:"mt-0",children:e.jsxDEV(r,{size:12,className:"mt-0",children:e.jsxDEV(be,{className:"customCard1 mt-2",children:e.jsxDEV("div",{children:[e.jsxDEV(r,{container:!0,direction:"row",className:"mb-1",children:[e.jsxDEV(r,{size:6,className:"mt-1",children:[e.jsxDEV("label",{className:"inputLabel",children:"Alert Type"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:437,columnNumber:57},void 0),e.jsxDEV(h,{fullWidth:!0,className:"mt-1",id:`alertType${a}`,name:`alertType${a}`,variant:"outlined",type:"text",size:"small",select:!0,value:l.alertType,onChange:o=>A(a,"alertType",o.target.value),children:[e.jsxDEV(u,{value:"Goal Progress",children:"Goal Progress"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:449,columnNumber:61},void 0),e.jsxDEV(u,{value:"Goal Met",children:"Goal Met"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:450,columnNumber:61},void 0),e.jsxDEV(u,{value:"Goal off Track",children:"Goal off Track"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:451,columnNumber:61},void 0)]},`al.${a}.alertType`,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:438,columnNumber:57},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:436,columnNumber:53},void 0),e.jsxDEV(r,{size:5,className:"mt-1 ml-1",children:[e.jsxDEV("label",{className:"inputLabel",children:"Alert Frequency"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:457,columnNumber:57},void 0),e.jsxDEV(h,{fullWidth:!0,className:"mt-1",id:`alertFrequency${a}`,name:`alertFrequency${a}`,variant:"outlined",type:"text",size:"small",select:!0,sx:{minWidth:"98px"},value:l.alertFrequency,onChange:o=>A(a,"alertFrequency",o.target.value),children:[e.jsxDEV(u,{value:"Daily",children:"Daily"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:470,columnNumber:61},void 0),e.jsxDEV(u,{value:"Weekly",children:"Weekly"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:471,columnNumber:61},void 0),e.jsxDEV(u,{value:"Monthly",children:"Monthly"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:472,columnNumber:61},void 0)]},`al.${a}.alertFrequency`,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:458,columnNumber:57},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:456,columnNumber:53},void 0),e.jsxDEV(r,{className:"mt-1 ml-1",children:t.values.goalAlerts.length>1?e.jsxDEV(W,{onClick:()=>L(a),className:"closeIcon",children:e.jsxDEV(ce,{},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:481,columnNumber:65},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:480,columnNumber:61},void 0):null},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:477,columnNumber:53},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:435,columnNumber:49},void 0),e.jsxDEV(r,{container:!0,direction:"row",children:[e.jsxDEV(r,{size:6,className:"mt-1",children:[e.jsxDEV("label",{className:"inputLabel",children:"Notification Receipt"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:491,columnNumber:57},void 0),e.jsxDEV(h,{fullWidth:!0,className:"mt-1",id:`alertNotificationReceipt${a}`,name:`alertNotificationReceipt${a}`,variant:"outlined",type:"text",size:"small",select:!0,sx:{minWidth:"200px"},value:l.alertNotificationReceipt,onChange:o=>A(a,"alertNotificationReceipt",o.target.value),children:[e.jsxDEV(u,{value:"Team Members assigned to the goals",children:"Team Members assigned to the goals"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:504,columnNumber:61},void 0),e.jsxDEV(u,{value:"Everyone",children:"Everyone"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:505,columnNumber:61},void 0),e.jsxDEV(u,{value:"Only Me",children:"Only Me"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:506,columnNumber:61},void 0),e.jsxDEV(u,{value:"Specific Users",children:"Specific Users"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:507,columnNumber:61},void 0)]},`al.${a}.alertNotificationReceipt`,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:492,columnNumber:57},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:490,columnNumber:53},void 0),l.alertNotificationReceipt==="Specific Users"&&e.jsxDEV(r,{size:5,className:"mt-1 ml-1",children:[e.jsxDEV("label",{className:"inputLabel",children:"Specific Users"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:512,columnNumber:62},void 0),e.jsxDEV(Q,{id:`goalAlerts[${a}].alertSpecificUsers`,className:"mt-1",handleChange:(o,i)=>{console.log({id:o,name:i},"test.."),t.setFieldValue(`goalAlerts[${a}].alertSpecificUsers`,o.split(",")),t.setFieldValue(`goalAlerts[${a}].alertSpecificUsersName`,i.split(","))},valuePassed:Array.isArray(t.values.goalAlerts[a].alertSpecificUsers)?{label:t.values.goalAlerts[a].alertSpecificUsersName.join(),id:t.values.goalAlerts[a].alertSpecificUsers.join()}:t.values.goalAlerts[a].alertSpecificUsers?{label:t.values.goalAlerts[a].alertSpecificUsersName,id:t.values.goalAlerts[a].alertSpecificUsers}:{},isMultiple:!0,width:"100%",type:"id",placeholder:"Select Specific Users"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:513,columnNumber:61},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:511,columnNumber:57},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:489,columnNumber:49},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:427,columnNumber:45},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:426,columnNumber:41},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:425,columnNumber:37},void 0)},a,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:424,columnNumber:33},void 0)),e.jsxDEV(r,{container:!0,className:"mb-0",justifyContent:"flex-end",children:e.jsxDEV(w,{className:"mr-5",color:"primary",size:"small",startIcon:e.jsxDEV(fe,{},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:546,columnNumber:98},void 0),onClick:P,children:"Add Alert"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:546,columnNumber:33},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:545,columnNumber:29},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:283,columnNumber:25},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:282,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:281,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:243,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/AddGoal.tsx",lineNumber:242,columnNumber:9},void 0)},ct=()=>{const k=f.checkSettings(110002)===5||f.checkSettings(110002)===6,j=f.checkSettings(110002)===6,[p,n]=d.useState(!1),[z,P]=d.useState(!1),[L,D]=d.useState(!1),[g,I]=d.useState([]),[U,O]=d.useState(),[S,t]=d.useState(""),[G,A]=d.useState([]),[C,T]=d.useState([]),[M,l]=d.useState({goalName:"",timeFrame:"",metric:"",target:"",targetValue:"",alert:[{alertType:"",alertFrequency:"",notificationReceipt:""}]}),[a,o]=d.useState({}),[i,y]=d.useState({pageIndex:0,pageSize:10}),F=s=>{X(s)},X=s=>{E(V.postWithData("admin","getGaolById",{goalId:s,clientId:f.getvalue("clientId")}).then(c=>{l(c.data.goalDetail),D(!0),n(!0)}))},Y=()=>{l({goalName:"",timeFrame:"",metric:"",target:"",targetValue:"",alert:[{alertType:"",alertFrequency:"",notificationReceipt:""}]}),n(!0),D(!1)},Z=s=>{n(!1),s&&R()};d.useEffect(()=>{const s=g.filter(c=>{var m;const N=S||"";return(m=c.goalName)==null?void 0:m.toLowerCase().includes(N.toLowerCase())});A(s)},[S,g]);let ee={clientId:f.getvalue("clientId")};const R=d.useCallback(J.debounce(()=>{E(V.postWithData("admin","getGoalList",ee).then(s=>{var N;let c=s.data.goalDetailsList;for(let m=0;m<c.length;m++)((N=c[m].createdDate)==null?void 0:N.length)>19&&(c[m].createdDate=he.ServerEDTToSystem(c[m].createdDate.substring(0,19),"yyyy-MM-dd hh:mm:ss","MM/dd/yyyy hh:mm a"));I(s.data.goalDetailsList)}))},400),[]),te=J.debounce(R,300);d.useEffect(()=>{!p&&te(),se()},[]);const ae=(s,c)=>{de(`Are you sure you want to delete ${c} Goal ?`,()=>{le(s),R()})},le=s=>{E(V.postWithData("admin","deleteGoal",{clientId:f.getvalue("clientId"),goalId:s,recrId:f.getvalue("recrId")}).then(c=>{c.data.Success?(v("Goal has been deleted successfully.","success"),R()):v(c.data.Message?c.data.Message:"An error occured while deleting","error")}).catch(c=>{var N,m,q,B;v((m=(N=c.response)==null?void 0:N.data)!=null&&m.Message?(B=(q=c.response)==null?void 0:q.data)==null?void 0:B.Message:"An error occured while deleting","error")}))},se=()=>{E(V.getCall("admin","getGoalMetrics/0").then(s=>{var c,N;if((c=s==null?void 0:s.data)!=null&&c.Success){let m=((N=s==null?void 0:s.data)==null?void 0:N.goalMetrics)||[];T([...m])}}).catch(s=>{console.error("Error fetching candidate status list",s)}))},re=d.useMemo(()=>[{accessorKey:"goalName",header:"GoalName",enableColumnPinning:!0,size:200},{accessorKey:"metric",header:"Metric Name",size:250},{accessorKey:"createdDate",header:"Created On",size:150},{accessorKey:"Actions",header:"Actions",enableSorting:!1,Cell:({row:s})=>e.jsxDEV(K,{children:e.jsxDEV(K,{direction:"row",children:[k?e.jsxDEV(_,{title:"Edit",placement:"top",color:"primary",children:e.jsxDEV(W,{onClick:()=>{F(s.original.goalId)},children:e.jsxDEV(pe,{},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Goals.tsx",lineNumber:289,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Goals.tsx",lineNumber:284,columnNumber:19},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Goals.tsx",lineNumber:283,columnNumber:17},void 0):null,j?e.jsxDEV(_,{title:"Delete",placement:"top",color:"primary",children:e.jsxDEV(W,{onClick:()=>{ae(s.original.goalId,s.original.goalName)},children:e.jsxDEV(ge,{},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Goals.tsx",lineNumber:303,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Goals.tsx",lineNumber:295,columnNumber:19},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Goals.tsx",lineNumber:294,columnNumber:17},void 0):null]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Goals.tsx",lineNumber:281,columnNumber:13},void 0)},s.original.goalId,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Goals.tsx",lineNumber:280,columnNumber:11},void 0)}],[]);return e.jsxDEV("div",{children:e.jsxDEV("div",{className:"pt-3 px-3 ",id:"Goals",children:[e.jsxDEV(r,{container:!0,direction:"row",className:"customCard px-4 py-2",justifyContent:"space-between",alignItems:"center",display:"flex",sx:{minHeight:"auto !important"},children:[e.jsxDEV(ue,{variant:"h6",className:"header",children:"Goals"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Goals.tsx",lineNumber:328,columnNumber:11},void 0),e.jsxDEV("div",{children:e.jsxDEV(r,{container:!0,direction:"row",justifyContent:"end",alignItems:"center",children:e.jsxDEV(w,{variant:"contained",color:"primary",size:"small",className:"ml-2",onClick:()=>Y(),children:"Create Goal"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Goals.tsx",lineNumber:348,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Goals.tsx",lineNumber:332,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Goals.tsx",lineNumber:331,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Goals.tsx",lineNumber:319,columnNumber:9},void 0),e.jsxDEV(r,{container:!0,className:"customCard p-0 filterExpand-grid",children:e.jsxDEV(r,{sx:{width:"calc(100%)"},children:e.jsxDEV("div",{className:"MRTableCustom  pl-0 ",children:e.jsxDEV(De,{columns:re,data:G,state:{rowSelection:a,pagination:i,globalFilter:S},enableStickyHeader:!0,initialState:{columnPinning:{left:["mrt-row-select","goalName"]},density:"compact",showGlobalFilter:!0},muiPaginationProps:{rowsPerPageOptions:[10],showFirstButton:!1,showLastButton:!1,SelectProps:{style:{display:"none"}}},enablePagination:!0,renderBottomToolbarCustomActions:()=>e.jsxDEV(Ge,{page:i.pageIndex,rowsPerPage:10,rowCount:G.length,onChangePage:s=>{y({...i,pageIndex:s,pageSize:10})},showCount:!1},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Goals.tsx",lineNumber:387,columnNumber:19},void 0),onGlobalFilterChange:t,enableFilters:!1,enableGlobalFilterModes:!0,columnResizeMode:"onChange",onPaginationChange:y,getRowId:s=>s.goalId,icons:{ArrowDownwardIcon:s=>e.jsxDEV(xe,{...s},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Goals.tsx",lineNumber:410,columnNumber:21},void 0)},rowCount:G.length},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Goals.tsx",lineNumber:363,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Goals.tsx",lineNumber:362,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Goals.tsx",lineNumber:361,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Goals.tsx",lineNumber:360,columnNumber:9},void 0),p?e.jsxDEV(ve,{open:p,handleClose:Z,goalData:M,add:!L,goalsMetricsList:C},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Goals.tsx",lineNumber:419,columnNumber:11},void 0):null]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Goals.tsx",lineNumber:318,columnNumber:7},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Goals.tsx",lineNumber:317,columnNumber:5},void 0)};export{ct as default};
