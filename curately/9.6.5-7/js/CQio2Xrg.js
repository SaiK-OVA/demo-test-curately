import{e as G,j as A,r as f,f as T,V as x,L as M,W as J,A as K,k as s,l as h,S as b,B as F}from"./DAuuuMsE.js";import{M as Q}from"./7FOaSWX5.js";import{L as C}from"./jPTC2gjK.js";import{u as X}from"./D1ftmOk2.js";import{c as Y,a as n,d as Z,h as ee}from"./DwmmMyHW.js";import{D as l,A as ae}from"./Cg41riQw.js";import{E as c}from"./BayHs3N0.js";import{T as E,I as se,F as te,C as le}from"./BestnZaX.js";import{F as D,S as N}from"./w5-nO31Y.js";import{M as o}from"./OPHguh9D.js";import{L as re,D as ue}from"./BZPAOVTJ.js";const Ne=G([A.jsx("path",{d:"M14.06 9.02 5 18.08V19h.92l9.06-9.06z",opacity:".3"},"0"),A.jsx("path",{d:"M18.37 3.29c-.2-.2-.45-.29-.71-.29s-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41zm-.56 6.65-3.75-3.75L3 17.25V21h3.75zM5 19v-.92l9.06-9.06.92.92L5.92 19z"},"1")],"ModeTwoTone"),ke=({contName:oe,taskData:m,taskId:p,contactId:I,taskUpdated:w})=>{const[O,L]=f.useState(!1),[S,k]=f.useState([]),[d,B]=f.useState(!1),$=Y({task:n().required("Title is required"),type:n().required("Type is required"),priority:n().required("Priority is required"),assignedTo:n().required("Recruiter is required"),assigned_names:n(),dueDate:n().nullable().test("dueDateOrCustom","Either Due Date or Custom Due Date must be provided",function(a){const{customDueDate:t}=this.parent;return a||t}),customDueDate:ee().nullable().test("customOrDueDate","Either Custom Due Date or Due Date must be provided",function(a){const{dueDate:t}=this.parent;return t==="customDate"?!!a:!0}),repeat:Z(),repeatType:n(),seltime:n(),notes:n()}),V=[{value:l.now().toFormat("MM-dd-yyyy"),label:"Today"},{value:l.now().plus({days:1}).toFormat("MM-dd-yyyy"),label:"Tomorrow"},{value:l.now().plus({days:2}).toFormat("MM-dd-yyyy"),label:`In 2 days (${l.now().plus({days:2}).toFormat("cccc")})`},{value:l.now().plus({days:3}).toFormat("MM-dd-yyyy"),label:`In 3 days (${l.now().plus({days:3}).toFormat("cccc")})`},{value:l.now().plus({weeks:1}).toFormat("MM-dd-yyyy"),label:`In 1 week (${l.now().plus({weeks:1}).toFormat("LLLL d")})`},{value:l.now().plus({weeks:2}).toFormat("MM-dd-yyyy"),label:`In 2 weeks (${l.now().plus({weeks:2}).toFormat("LLLL d")})`},{value:l.now().plus({months:1}).toFormat("MM-dd-yyyy"),label:`In 1 month (${l.now().plus({months:1}).toFormat("LLLL d")})`},{value:l.now().plus({months:3}).toFormat("MM-dd-yyyy"),label:`In 3 months (${l.now().plus({months:3}).toFormat("LLLL d")})`},{value:l.now().plus({months:6}).toFormat("MM-dd-yyyy"),label:`In 6 months (${l.now().plus({months:6}).toFormat("LLLL d")})`},{value:"customDate",label:"Custom Date"}],e=X({initialValues:{...m,dueDate:V.some(a=>a.value===m.dueDate)?m.customDueDate:"customDate",customDueDate:m.customDueDate},validationSchema:$,validateOnChange:!0,validateOnBlur:!0,onSubmit:a=>{W()}}),z=a=>{const t=a.startOf("month"),u=Math.floor(a.day/7),r=a.weekday;return a<t.plus({days:7})?1:u+(r<t.weekday?1:0)},v=a=>{console.log(a);const t=z(a),u=["First","Second","Third","Fourth","Fifth"][t-1]||"Last";return[{value:"daily",label:"Daily"},{value:"weekly",label:`Weekly on ${a.toFormat("cccc")}`},{value:"biweekly",label:`Bi-Weekly on ${a.plus({weeks:2}).toFormat("cccc")}`},{value:"monthly",label:`Monthly on the ${u} ${a.toFormat("cccc")}`},{value:"annually",label:`Annually on ${a.plus({years:1}).toFormat("MMM dd")}`},{value:"weekday",label:"Every weekday (Monday to Friday)"}]},g=T("span")(()=>({borderRadius:1,width:16,height:16,backgroundColor:"#ffffff"})),R=T(g)({backgroundColor:"var(--c-primary-color)","&:before":{display:"block",width:16,height:16,backgroundImage:`url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M12 5c-.28 0-.53.11-.71.29L7 9.59l-2.29-2.3a1.003 1.003 0 00-1.42 1.42l3 3c.18.18.43.29.71.29s.53-.11.71-.29l5-5A1.003 1.003 0 0012 5z' fill='%23fff'/%3E%3C/svg%3E")`,content:'""'}}),_=T("div")({".bp-icon":{border:"1px var(--c-secondary-color) solid"},"& .bp-checkbox:hover .bp-icon":{borderColor:"var(--c-primary-color)"}}),q=(a,t)=>{let u=l.fromFormat(a,"MM-dd-yyyy");switch(t){case"daily":return u.plus({days:1}).toISODate();case"weekly":return u.plus({weeks:1}).toISODate();case"monthly":return u.plus({months:1}).toISODate();case"annually":return u.plus({years:1}).toISODate();case"weekday":let r=u.plus({days:1});for(;r.weekday===6||r.weekday===7;)r=r.plus({days:1});return r.toISODate();default:return a}};function P(a){const[t,u]=a.split(" ");let[r,i]=t.split(":");return u==="PM"&&r!=="12"?r=(parseInt(r,10)+12).toString():u==="AM"&&r==="12"&&(r="00"),r=r.padStart(2,"0"),{due_hours:r,due_mins:i,due_format:u}}const W=()=>{var j;B(!0);const{due_hours:a,due_mins:t,due_format:u}=P(e.values.selTime),r=e.values.repeatType?q(e.values.dueDate==="customDate"?e.values.customDueDate:e.values.dueDate,e.values.repeatType):"";if(e.values.repeat){if(e.values.repeatType.trim()==="")return x("Please select repeat type.","error"),!1}else e.setFieldValue("repeatType","");let i={id:"",taskName:e.values.task,selDate:e.values.dueDate==="customDate"?e.values.customDueDate:e.values.dueDate,dueHours:a,dueMins:t,dueFormat:u,due:"setdatetime",catg:e.values.type,userId:"",contId:I,compId:"",recrId:M.getvalue("recrId"),clientId:M.getvalue("clientId"),priority:e.values.priority,associate:"",assignedTo:e.values.assignedTo,assignedNames:e.values.assigned_names,queue:"",repeat:e.values.repeat?1:0,reminder:"",associateNames:"",notes:e.values.notes,repeatType:e.values.repeatType,repeatId:(j=e.values)==null?void 0:j.repeatId,repeatDate:e.values.repeatType?r:""};p&&(i.id=p+""),J(K.postWithData("admin",p?"updateContactTask":"saveContactTask",i).then(y=>{y.data.Message==="Success"?(x("Task has been added successfully.","success"),w(!0)):x(y.data.message?y.data.message:"An error occured while saving the Task.","error")}).catch(y=>{console.error(y)})),L(!1)},H=()=>{e.resetForm(),w(!1)};f.useEffect(()=>{const a=v(l.fromFormat(m.dueDate,"MM-dd-yyyy"));k(a)},[]);const U=C.some(a=>a.id===e.values.selTime);return s.jsxDEV("form",{onSubmit:e.handleSubmit,children:s.jsxDEV(h,{children:s.jsxDEV(h,{children:!O&&s.jsxDEV(h,{children:[s.jsxDEV(h,{className:"radio-Box",children:[s.jsxDEV(E,{className:"typeNote",placeholder:"Enter task title...",sx:{marginBottom:"12px",paddingTop:"10px"},size:"small",value:e.values.task,onChange:e.handleChange,name:"task"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:394,columnNumber:25},void 0),s.jsxDEV(c,{formikObj:e,name:"task",isFormSubmitted:d},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:406,columnNumber:25},void 0),s.jsxDEV(b,{direction:"row",spacing:1,sx:{width:"100%",marginBottom:"12px"},children:[s.jsxDEV(D,{sx:{width:"50%"},children:[s.jsxDEV(N,{labelId:"demo-simple-select-label",id:"demo-simple-select",displayEmpty:!0,name:"type",value:e.values.type,onChange:e.handleChange,onBlur:e.handleBlur,size:"small",className:"typeNote",children:[s.jsxDEV(o,{value:"",disabled:!0,children:"Type"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:422,columnNumber:37},void 0),s.jsxDEV(o,{value:"To-Do",children:"To-Do"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:423,columnNumber:37},void 0),s.jsxDEV(o,{value:"Call",children:"Call"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:424,columnNumber:37},void 0),s.jsxDEV(o,{value:"Email",children:"Email"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:425,columnNumber:37},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:411,columnNumber:33},void 0),s.jsxDEV(c,{formikObj:e,name:"type",isFormSubmitted:d},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:427,columnNumber:33},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:410,columnNumber:29},void 0),s.jsxDEV(D,{sx:{width:"50%"},children:[s.jsxDEV(N,{labelId:"demo-simple-select-label",id:"demo-simple-select",displayEmpty:!0,value:e.values.priority,onChange:e.handleChange,onBlur:e.handleBlur,size:"small",className:"typeNote",name:"priority",children:[s.jsxDEV(o,{value:"",disabled:!0,children:"Priority"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:442,columnNumber:37},void 0),s.jsxDEV(o,{value:"0",children:"None"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:443,columnNumber:37},void 0),s.jsxDEV(o,{value:"1",children:"Low"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:444,columnNumber:37},void 0),s.jsxDEV(o,{value:"2",children:"Medium"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:445,columnNumber:37},void 0),s.jsxDEV(o,{value:"3",children:"High"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:446,columnNumber:37},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:431,columnNumber:33},void 0),s.jsxDEV(c,{formikObj:e,name:"priority",isFormSubmitted:d},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:448,columnNumber:33},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:430,columnNumber:29},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:409,columnNumber:25},void 0),s.jsxDEV(Q,{id:"recruiter",valuePassed:{id:e.values.assignedTo,label:e.values.assigned_names||"Unknown"},handleChange:(a,t)=>{e.setFieldValue("assignedTo",a),e.setFieldValue("assigned_names",t||"")},isMultiple:!1,width:"100%",type:"userName",placeholder:"Select recruiter"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:454,columnNumber:25},void 0),s.jsxDEV(c,{formikObj:e,name:"assignedTo",isFormSubmitted:d},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:469,columnNumber:25},void 0),s.jsxDEV(b,{className:"dateTime-stack mt-5",direction:"row",spacing:1,children:[s.jsxDEV(b,{spacing:3,children:s.jsxDEV(re,{dateAdapter:ae,children:e.values.dueDate==="customDate"?s.jsxDEV(ue,{label:"Select Date",slotProps:{textField:{size:"small"}},onChange:a=>{if(e.setFieldValue("customDueDate",a?a.toFormat("MM-dd-yyyy"):null,!0),e.setFieldValue("dueDate","customDate",!0),a){const t=v(a);k(t)}},value:e.values.customDueDate?l.fromFormat(e.values.customDueDate,"MM-dd-yyyy"):null,sx:{width:"170px"}},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:480,columnNumber:41},void 0):s.jsxDEV(D,{size:"small",children:[s.jsxDEV(se,{id:"date-select-label",children:"Due Date"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:496,columnNumber:45},void 0),s.jsxDEV(N,{labelId:"date-select-label",id:"dueDate",name:"dueDate",value:e.values.dueDate,label:"Due Date",onChange:a=>{if(e.handleChange(a),a.target.value){const t=v(l.fromFormat(a.target.value,"MM/dd/yyyy"));k(t)}a.target.value==="customDate"&&e.setFieldValue("customDueDate",null)},size:"small",sx:{width:"163px !important",mr:1},children:V.map(a=>s.jsxDEV(o,{value:a.value,children:a.label},a.value,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:517,columnNumber:53},void 0))},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:497,columnNumber:45},void 0),s.jsxDEV(c,{formikObj:e,name:"dueDate",isFormSubmitted:d},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:522,columnNumber:45},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:495,columnNumber:41},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:478,columnNumber:33},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:476,columnNumber:29},void 0),s.jsxDEV(D,{children:[s.jsxDEV(E,{select:!0,id:"demo-simple-select",size:"small",name:"selTime",value:e.values.selTime,onChange:e.handleChange,sx:{width:"135px"},children:[!U&&s.jsxDEV(o,{value:e.values.selTime,children:e.values.selTime},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:544,columnNumber:41},void 0),C.map(a=>s.jsxDEV(o,{value:a.id,children:a.label},a.id,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:549,columnNumber:41},void 0))]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:534,columnNumber:33},void 0),s.jsxDEV(c,{formikObj:e,name:"selTime",isFormSubmitted:d},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:554,columnNumber:33},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:533,columnNumber:29},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:470,columnNumber:25},void 0),s.jsxDEV("div",{style:{width:"100%"},children:s.jsxDEV(te,{control:s.jsxDEV(_,{children:s.jsxDEV(le,{className:"bp-checkbox",disableRipple:!0,name:"repeat",checked:!!e.values.repeat,onChange:()=>{const a=!e.values.repeat;e.setFieldValue("repeat",a),a||e.setFieldValue("repeatType","")},checkedIcon:s.jsxDEV(R,{className:"bp-icon",style:{borderColor:"var(--c-primary-color)"}},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:575,columnNumber:58},void 0),icon:s.jsxDEV(g,{className:"bp-icon"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:576,columnNumber:51},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:561,columnNumber:41},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:560,columnNumber:37},void 0),label:"Repeat",sx:{ml:0}},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:558,columnNumber:29},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:557,columnNumber:25},void 0),e.values.repeat?s.jsxDEV(s.Fragment,{children:[s.jsxDEV(N,{name:"repeatType",value:e.values.repeatType,onChange:e.handleChange,size:"small",className:"typeNote",children:S.map(a=>s.jsxDEV(o,{value:a.value,children:a.label},a.value,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:596,columnNumber:45},void 0))},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:588,columnNumber:37},void 0),s.jsxDEV(c,{formikObj:e,name:"repeatType",isFormSubmitted:d},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:601,columnNumber:37},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:587,columnNumber:33},void 0):null,s.jsxDEV(E,{multiline:!0,rows:3,className:"",placeholder:"Enter Notes",sx:{marginBottom:"12px",paddingTop:"10px"},size:"small",value:e.values.notes,onChange:e.handleChange,name:"notes",onBlur:e.handleBlur,fullWidth:!0},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:606,columnNumber:25},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:392,columnNumber:21},void 0),s.jsxDEV(b,{direction:"row",spacing:2,pl:"20px",pr:"20px",sx:{display:"flex",justifyContent:"space-between",width:"auto"},mb:2,mt:1,children:[s.jsxDEV(F,{disableRipple:!0,color:"primary",variant:"contained",type:"submit",children:p?"Update":"Create"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:625,columnNumber:25},void 0),s.jsxDEV(F,{disableRipple:!0,color:"secondary",variant:"outlined",onClick:H,children:"Cancel"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:634,columnNumber:25},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:623,columnNumber:21},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:390,columnNumber:37},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:389,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:388,columnNumber:9},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/Tasks/AddTask.tsx",lineNumber:387,columnNumber:12},void 0)};export{ke as A,Ne as M};
