import{r as n,al as T,k as e,D as k,O as F,I as w,n as A,o as B,l as L,S as J,U as O,B as R,V as l,L as u,A as d}from"./DAuuuMsE.js";import{u as W}from"./D1ftmOk2.js";import{c as $,a as H}from"./DwmmMyHW.js";import{S as z,P as G,a as U}from"./Cg41riQw.js";import{D as q}from"./Br0xRRVu.js";import{T as K}from"./BestnZaX.js";import{D as Q}from"./C_IKUwSv.js";const De=({dialogOpen:m,onClose:c,name:X,toPhone:Y,candidateId:h="",contactId:D="",workflowJobCandidateId:f="",contactName:Z,call:_,isBulkSMS:g,jobId:y})=>{const[ee,te]=n.useState(""),[ae,se]=n.useState(!1),[oe,ne]=n.useState(!1),{jobId:x}=T(),N=y||x,r=140,p=t=>{const s=t.target.value;t.target.value.length<=r&&a.setFieldValue("desc",s)},b={desc:""},P=$({desc:H().max(r,`Cannot exceed ${r} characters`)}),a=W({initialValues:b,onSubmit:()=>{},validationSchema:P}),S=()=>{if(a.values.desc){const t={clientId:u.getvalue("clientId"),userIds:h,recrId:u.getvalue("recrId"),jobId:N,contId:D,workflowJobCandId:f,body:a.values.desc};d.postWithData("admin","smsSent",t).then(s=>{s.data.Message==="Success"?(a.setFieldValue("desc",""),l("SMS has been sent successfully.","success"),E(4141),c()):l(s.data.Message,"error")})}else l("Please enter SMS to sent","warning")},o=n.useRef(),v=t=>{let s=o.current.selectionStart||0,I=o.current.value.substring(0,s),M=o.current.value.substring(s,o.current.value.length);const i=I+` {{${t}}} `+M;i.length>140?l("SMS body cannot exceed 140 characters.","error"):a.setFieldValue("desc",i),o.current.focus()},V=t=>{t.replace(/\n/g," ").length>140?l("SMS body cannot exceed 140 characters.","error"):a.setFieldValue("desc",t),o.current.focus()},[j,C]=n.useState(!1),E=t=>{d.saveAuditLog(t)};return e.jsxDEV(k,{maxWidth:"sm",fullWidth:!0,open:m,className:"AddJobModal",id:"PhoneDialog",children:[e.jsxDEV(q,{className:"header",children:e.jsxDEV(F,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxDEV("span",{className:"addHeader",children:g?"Bulk SMS":"SMS"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:234,columnNumber:21},void 0),e.jsxDEV(w,{"aria-label":"close",onClick:c,className:"closeBtn",children:e.jsxDEV(A,{},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:243,columnNumber:25},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:238,columnNumber:21},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:228,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:227,columnNumber:13},void 0),e.jsxDEV(B,{sx:{px:0},children:e.jsxDEV(L,{className:"p-5 ",children:[e.jsxDEV(K,{color:"error",className:"typeCall mt-2",multiline:!0,rows:4,inputRef:o,placeholder:"Type SMS",value:a.values.desc,onChange:p,name:"desc",margin:"dense",id:"desc",type:"text",size:"small",fullWidth:!0},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:251,columnNumber:21},void 0),e.jsxDEV(J,{direction:"row",justifyContent:"space-around",alignItems:"flex-end",spacing:1,children:e.jsxDEV("div",{style:{marginLeft:"428px"},children:[a.values.desc.length," of ",r," characters"]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:286,columnNumber:25},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:271,columnNumber:21},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:250,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:247,columnNumber:13},void 0),e.jsxDEV(Q,{},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:296,columnNumber:13},void 0),e.jsxDEV(O,{children:[e.jsxDEV(z,{insertSMSTemp:V,loadTemplates:j},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:298,columnNumber:17},void 0),e.jsxDEV(G,{onInsertField:v},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:299,columnNumber:17},void 0),e.jsxDEV(U,{message:a.values.desc,templateAdded:()=>C(t=>!t)},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:300,columnNumber:17},void 0),e.jsxDEV(R,{variant:"contained",color:"primary",onClick:()=>{S()},children:"Send SMS"},void 0,!1,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:302,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:297,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/demo-test-curately/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:221,columnNumber:9},void 0)};export{De as P};
